(()=>{var X=class{method;url;action;wheres;defaults=null;constructor(t,n,o,r=null,i){this.method=t,this.url=n,this.action=o,this.wheres={},this.defaults=r,i&&(this.wheres=i)}where(t,n){return t!==null&&typeof t=="object"?this.wheres=Object.assign(this.where,t):n&&(this.wheres[t]=n),this}};var Z=class{routes;trimExpr=/^\/|\/$/g;setRoutes(t){this.routes=t}getRoutes(){return this.routes}register(t,n,o,r=null,i){let u=new X(t.toLowerCase(),n,o,r,i);return this.routes.push(u),u}get(t,n){return this.register("get",t,n)}resolve(t){t=t.replace(this.trimExpr,"");let n=t.split("/");for(let o in this.routes){let r={},i=!0,u=this.routes[o],a=u.url.replace(this.trimExpr,"").split("/"),h=0,c=!1;for(h;h<a.length;h++){let m=a[h];if(m.indexOf("*")!==-1){let b=m.slice(0,-1);if(!b||n[h].indexOf(b)===0){c=!0;break}}let k=m.indexOf("{")!==-1;if(m!==n[h]&&!k){i=!1;break}if(k){let b=m.split(/[{}]+/),l=b[1];if(l[l.length-1]==="?")l=l.slice(0,-1);else if(h>=n.length){i=!1;break}if(l.indexOf("<")!==-1){let x=/<([^>]+)>/.exec(l);x&&(l=l.replace(/<([^>]+)>/g,""),u.wheres[l]=x[1])}if(u.wheres[l]){let x=new RegExp(u.wheres[l],"g");if(!x.test(n[h])){i=!1;break}x.lastIndex=0,x.test("/")&&(c=!0)}let _=h<n.length?n[h]:null;if(_&&b[0])if(_.indexOf(b[0])!==0){i=!1;break}else _=_.slice(b[0].length);if(r[l]=_,c){r[l]=n.slice(h).join("/");break}}}if(h<n.length&&!c&&(i=!1),i)return{item:u,params:r}}return null}};var M={list:{},booleanAttributes:{},router:new Z};var J={};var W=class{id=null;name=null};var q=class{count=0;increment(){this.count++}decrement(){this.count--}};var ee=class{items=[];addNewItem(t){this.items.push(t)}};var v=class{__id="";_props={};$_callbacks={};_refs={};_slots={};_element=null;$$t=[];$$r={};$$p=[];$;_name="BaseComponent";emitEvent(t,n){t in this.$_callbacks&&this.$_callbacks[t](n)}};var te=class extends v{_name="MenuBar"};function K(e){var t=e+"";return t.length}var ne=class extends v{_name="Counter";count=0;message="My message";increment(){this.count++,this.message+="!"}decrement(){this.count--}},Ae=[function(e){return function(t){e.decrement()}},function(e){return e.count%10+12},function(e){return`
    Count `+(e.count??"")+" "+(K(e.message)??"")+`
`},function(e){return`
Count `+(e.count??"")+" "+(K(e.message)??"")+`
`},function(e){return function(t){e.count++}},function(e){return function(t){e.increment()}},function(e){return function(t){e.increment(t)}},function(e){return function(t){e.increment(t)}},function(e){return e.message}];var oe=class extends v{_name="HomePage";title="Viewi v2 - Build reactive front-end with PHP"},$e=[function(e){return e.title},function(e){return e.title}];var re=class extends v{_name="Layout";title="Viewi"},Ie=[function(e){return`
        `+(e.title??"")+` | Viewi
    `}];var ie=class extends v{_name="NotFoundPage"};var ce=class extends v{_name="CounterPage"};var ue=class extends v{_name="TestPage"};var se=class extends v{_name="TodoAppPage"};var ae=class extends v{_name="StatefulCounter";counter=null;count=null;constructor(t,n){super(),this.counter=t,this.count=n===void 0?0:n}},Se=[function(e){return function(t){e.counter.decrement()}},function(e){return e.__id},function(e){return e.counter.count},function(e){return function(t){e.counter.increment()}}];function Q(e,t){let n,o=0;if(e===null||typeof e>"u")return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;t==="COUNT_RECURSIVE"&&(t=1),t!==1&&(t=0);for(n in e)e.hasOwnProperty(n)&&(o++,t===1&&e[n]&&(e[n].constructor===Array||e[n].constructor===Object)&&(o+=Q(e[n],1)));return o}var le=class extends v{_name="StatefulTodoApp";text="";todo=null;constructor(t){super(),this.todo=t}handleSubmit(t){t.preventDefault(),K(this.text)!=0&&(this.todo.addNewItem(this.text),this.text="")}},we=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Q(e.todo.items)+1)+`
    `},function(e){return e.todo.items}];var me=class extends v{_name="ItemComponent"};var fe=class extends v{_name="SomeComponent"};var de=class extends v{_name="TestButton";id=null;title=null;class=null;disabled=!1;loading=!1;onClick(t){this.emitEvent("click",t)}},Be=[function(e){return e.id},function(e){return e.disabled},function(e){return e.title},function(e){return e.class},function(e){return function(t){e.onClick(t)}},function(e){return" "+(e.title??"")+`
    `},function(e){return e.loading}];function Ce(e){var t=typeof window<"u"?window:global;t.$locutus=t.$locutus||{};var n=t.$locutus;n.php=n.php||{};var o=t.JSON,r;try{if(typeof o=="object"&&typeof o.stringify=="function"){if(r=o.stringify(e),r===void 0)throw new SyntaxError("json_encode");return r}var i=e,u=function(a){var h=["\0-","\x7F-\x9F","\xAD","\u0600-\u0604","\u070F","\u17B4","\u17B5","\u200C-\u200F","\u2028-\u202F","\u2060-\u206F","\uFEFF","\uFFF0-\uFFFF"].join(""),c=new RegExp('[\\"'+h+"]","g"),m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(p){var k=m[p];return typeof k=="string"?k:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},s=function(a,h){var c="",m="    ",p=0,k="",b="",l=0,_=c,x=[],d=h[a];switch(d&&typeof d=="object"&&typeof d.toJSON=="function"&&(d=d.toJSON(a)),typeof d){case"string":return u(d);case"number":return isFinite(d)?String(d):"null";case"boolean":return String(d);case"object":if(!d)return"null";if(c+=m,x=[],Object.prototype.toString.apply(d)==="[object Array]"){for(l=d.length,p=0;p<l;p+=1)x[p]=s(p,d)||"null";return b=x.length===0?"[]":c?`[
`+c+x.join(`,
`+c)+`
`+_+"]":"["+x.join(",")+"]",b}for(k in d)Object.hasOwnProperty.call(d,k)&&(b=s(k,d),b&&x.push(u(k)+(c?": ":":")+b));return b=x.length===0?"{}":c?`{
`+c+x.join(`,
`+c)+`
`+_+"}":"{"+x.join(",")+"}",b;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return s("",{"":i})}catch(a){if(!(a instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return n.php.last_error_json=4,null}}var pe=class extends v{_name="TestComponent";name="MyName";name2="";_name2_Test="MyName_2";empty="";null=null;url="/home";attr="title";event="(click)";arr=["a","b","c"];arrWithKeys={a:"Apple",b:"Orange",c:"Lemon"};arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},b:{a:"Apple",b:"Orange",c:"Lemon"},c:{a:"Apple",b:"Orange",c:"Lemon"}};ifValue=!0;ifElseValue=!0;nestedIf=!0;dynamic="div";dynamic2="ItemComponent";raw="<b><i>Raw html text</i></b>";isDisabled=!0;message="Some message";checked=!1;checked2=!0;checkedNames=[];picked="One";selected="";selectedList=["A","C"];user=null;NameInput=null;testModel="some test";counterReducer=null;constructor(t){super(),this.counterReducer=t,this.user=new W,this.user.id=1,this.user.name="Miki the cat",this.counterReducer.increment()}getNames(){return Ce(this.checkedNames)}getName(t){var n=60;return t??"DefaultName"}addTodo(){this.arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},d:{R:"Rat",T:"Dog",G:"Cat"},b:{a:"Apple",b:"Orange",c:"Lemon"}}}onEvent(t){t.preventDefault()}toggleIf(){this.ifValue=!this.ifValue,this.arr=this.ifValue?["a","b","c"]:["x","b","r"]}toggleElseIf(){this.ifElseValue=!this.ifElseValue}},Me=[function(e){return"Tag test "+(e.name??"")+" "+(e.name2??"")+" "+(e._name2_Test??"")},function(e){return`
    $notAVar `+(e.getName()??"")+" "+(e.getName(e.name)??"")+`
    Nested
    `},function(e){return e.url},function(e){return e.empty},function(e){return e.null},function(e){return e.attr},function(e){return function(t){expression(t)}},function(e){return e.event},function(e){return function(t){e.onEvent(t)}},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return e.testModel},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")+`
`},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.counterReducer.increment(t)}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return e.__id},function(e){return"First Name ("+(e.__id??"")+")"},function(e){return e.__id},function(e){return function(t){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return[function(t){return t.user.name},function(t,n){t.user.name=n}]},function(e){return e.user.name},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return`
    `+(e.name??"")+`
`},function(e){return[function(t){return t.name2},function(t,n){t.name2=n}]},function(e){return`
    `+(e.name2??"")+`
`},function(e){return[function(t){return t.message},function(t,n){t.message=n}]},function(e){return e.message},function(e){return[function(t){return t.checked},function(t,n){t.checked=n}]},function(e){return e.checked},function(e){return[function(t){return t.checked2},function(t,n){t.checked2=n}]},function(e){return e.checked2},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return"Checked names: "+(e.getNames()??"")},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return"Picked: "+(e.picked??"")},function(e){return[function(t){return t.selected},function(t,n){t.selected=n}]},function(e){return"Selected: "+(e.selected??"")},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return"Selected: "+(Ce(e.selectedList)??"")},function(e){return e.isDisabled},function(e){return!e.isDisabled},function(e){return e.isDisabled?" mui-btn":""},function(e){return e.isDisabled?" mui-btn--primary":""},function(e){return e.isDisabled?"":" mui-btn--accent"},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return e.raw},function(e){return e.raw},function(e){return function(t){e.raw=e.raw[0]==="<"?"New RAW: <span><i>Another content</i></span>":"<b><i>Raw html text</i></b>"}},function(e){return e.nestedIf},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return e.nestedIf},function(e){return{id:"myid",title:"Custom "+e.name,class:"mui-btn--accent"}},function(e){return`
    Custom `+(e.name??"")+`
`},function(e){return function(t){e.name="Viewi Junior"}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return e.nestedIf},function(e){return e.arrNested},function(e,t,n){return`
    Custom `+(e.name??"")+` Slot
    `},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.dynamic=e.dynamic==="div"?"ItemComponent":"div"}},function(e){return`
`+(e.dynamic??"")+" "+(e.dynamic2??"")+`
`},function(e){return e.dynamic},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return e.dynamic2},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return"Custom "+(e.name??"")+` slot
        `},function(e){return"Custom header "+(e.name??"")+" inside div"},function(e){return"Custom "+(e.name??"")+" footer"},function(e){return function(t){e.addTodo(t)}},function(e){return e.nestedIf},function(e){return e.name},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arr},function(e,t,n){return e.ifElseValue},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return e.arr},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+". "},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.arrWithKeys},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+": "},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arrNested},function(e,t,n){return t==="b"},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return function(t){e.toggleIf(t)}},function(e){return function(t){e.toggleElseIf(t)}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.name="Viewi Junior"}},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.arr},function(e,t,n){return n}];var he=class extends v{_name="TestInput";id=null;model=null;onInput(t){this.emitEvent("model",t.target.value)}},Ee=[function(e){return function(t){e.onInput(t)}},function(e){return[function(t){return t.model},function(t,n){t.model=n}]}];var xe=class extends v{_name="TodoApp";text="";items=[];handleSubmit(t){t.preventDefault(),K(this.text)!=0&&(this.items=[...this.items,this.text],this.text="")}},De=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Q(e.items)+1)+`
    `},function(e){return e.items}];var be=class extends v{_name="TodoList";items=null},Pe=[function(e){return e.items},function(e,t,n){return n}];var F={UserModel:W,CounterReducer:q,TodoReducer:ee,MenuBar:te,Counter_x:Ae,Counter:ne,HomePage_x:$e,HomePage:oe,Layout_x:Ie,Layout:re,NotFoundPage:ie,CounterPage:ce,TestPage:ue,TodoAppPage:se,StatefulCounter_x:Se,StatefulCounter:ae,StatefulTodoApp_x:we,StatefulTodoApp:le,ItemComponent:me,SomeComponent:fe,TestButton_x:Be,TestButton:de,TestComponent_x:Me,TestComponent:pe,TestInput_x:Ee,TestInput:he,TodoApp_x:De,TodoApp:xe,TodoList_x:Pe,TodoList:be};function Le(e,t){return function(n){t(e,n)}}var Re={_props:!0,$_callbacks:!0,_refs:!0,_slots:!0,_element:!0,$$t:!0,$$r:!0,$:!0,_name:!0,emitEvent:!0};var tt=0;function nt(e,t,n){let o=e.$??e;return o.$||(Object.defineProperty(o,"$",{enumerable:!1,writable:!0,value:o}),Object.defineProperty(o,"$$r",{enumerable:!1,writable:!0,value:{}})),new Proxy(o,{set(i,u,s){let a=i[u]!==s,h=Reflect.set(i,u,s);if(a)for(let c in i.$$r){let m=i.$$r[c][0],p=i.$$r[c][1],k=m+"."+u;if(k in p.$$r)for(let b in p.$$r[k]){let l=p.$$r[k][b];l[0].apply(null,l[1])}}return h}})}function Ve(e){let t=Object.keys(e);for(let o=0;o<t.length;o++){let r=t[o],i=e[r];if(!(r in Re)&&i!==null&&typeof i=="object"&&!Array.isArray(i)){let u=nt(i,e,r);e[r]=u;let s=++tt+"";u.$$r[s]=[r,e],e.$$p.push([s,u])}}let n=new Proxy(e,{set(o,r,i){let u=o[r]!==i,s=Reflect.set(o,r,i);if(u&&r in o.$$r)for(let a in o.$$r[r]){let h=o.$$r[r][a];h[0].apply(null,h[1])}return s}});return e.$=e,n}var ot=0;function P(e){return e.__aid||(e.__aid=++ot,J[e.__aid]={current:-1,target:e,invalid:[],added:0}),J[e.__aid]}function He(e,t){let n=P(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let i=[];for(let s=n.current+1;s<r;s++){let a=e.childNodes[s];if(a.nodeType===8)return n.current=s,n.invalid=n.invalid.concat(i),a;i.push(s)}n.added++,n.invalid=n.invalid.concat(i),console.log("Hydrate comment not found",t);let u=document.createComment(t);return n.current=n.current+i.length+1,o>n.current?e.insertBefore(u,e.childNodes[n.current]):e.appendChild(u)}var rt={body:!0,head:!0,html:!0};function Oe(e,t){let n=P(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let i=[];for(let s=n.current+1;s<r;s++){let a=e.childNodes[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===t)return n.current=s,n.invalid=n.invalid.concat(i),a;i.push(s)}if(t in rt){let s=document.getElementsByTagName(t);if(s.length>0)return n.invalid=[],s[0]}n.added++,n.invalid=n.invalid.concat(i),console.warn("Hydrate not found",t);let u=document.createElement(t);return n.current=n.current+i.length+1,o>n.current?e.insertBefore(u,e.childNodes[n.current]):e.appendChild(u)}function G(e,t,n,o){let r=[e];o.arguments&&(r=r.concat(o.arguments));let i=(t.expression?e.$$t[t.code].apply(null,r):t.content)??"";n.nodeValue!==i&&(n.nodeValue=i)}function je(e,t,n,o){let r=P(e),i=e.childNodes.length,u=r.current+3;u=u>i?i:u;let s=[],a=r.current>-1?r.current:r.current+1;for(let c=a;c<u;c++){let m=e.childNodes[c];if(m.nodeType===3){if(c===r.current)break;return r.current=c,r.invalid=r.invalid.concat(s),G(t,n,m,o),m}c!==r.current&&s.push(c)}r.added++,r.invalid=r.invalid.concat(s);let h=document.createTextNode("");return G(t,n,h,o),r.current=r.current+s.length+1,i>r.current?e.insertBefore(h,e.childNodes[r.current]):e.appendChild(h)}function Y(e,t,n,o,r){let i=null;if(t.children){i="";for(let u=0;u<t.children.length;u++){let s=t.children[u],a=[e];r.arguments&&(a=a.concat(r.arguments));let h=s.expression?e.$$t[s.code].apply(null,a):s.content??"";i=u===0?h:i+(h??"")}}o.toLowerCase()in M.booleanAttributes?i===!0||i===null?o!==n.getAttribute(o)&&n.setAttribute(o,o):n.removeAttribute(o):i!==null?i!==n.getAttribute(o)&&n.setAttribute(o,i):n.removeAttribute(o)}var Ke=0;function ge(){return++Ke}function S(e,t=!1,n,o){let r=document.createTextNode("");return r._anchor=o??"#"+ ++Ke,n&&n.current++,t||n&&e.childNodes.length>n.current?(n?e:e.parentElement).insertBefore(r,n?e.childNodes[n.current]:e):e.appendChild(r),r}function j(e){for(let t in e.track){let n=e.track[t];delete e.instance.$$r[n.path][n.id]}if(e.track=[],e.components=[],e.children){for(let t in e.children)j(e.children[t]);e.children={}}if(e.main)for(let t=0;t<e.instance.$$p.length;t++){let n=e.instance.$$p[t];delete n[1].$$r[n[0]]}e.parent&&(delete e.parent.children[e.id],delete e.parent)}function Fe(e,t,n,o,r,i,u){let s=[e];u.arguments&&(s=s.concat(u.arguments));let a=e.$$t[n.children[0].forData].apply(null,s),h=Array.isArray(a),c=o,m=!1,p={},k={};for(let b in a){let l=h?+b:b,_=a[l],x=++u.counter,d={id:x,instance:e,arguments:[...u.arguments],components:[],map:{...u.map},track:[],parent:u,children:{},counter:0};u.refs&&(d.refs=u.refs),u.children[x]=d;let C=!1;for(let N in r)if(r[N]===_){C=!0,m=!1,c=o;break}else!m&&!(l in p)&&(c=r[N].begin,m=!0);if(p[l]=!0,!C){d.map[n.children[0].forKey]=d.arguments.length,d.arguments.push(l),d.map[n.children[0].forItem]=d.arguments.length,d.arguments.push(_);let N={map:{...i.map},storage:{...i.storage}},f=S(c,!0,void 0,"b"+ge());E(c,e,[t],d,N,!1,!0);let y=S(c,!0,void 0,f._anchor);l in r&&(k[l]=r[l]),r[l]={key:l,value:_,begin:f,end:y,scope:d}}}for(let b in r)if(!(b in p)){let l=r[b].end;for(;l.previousSibling._anchor!==l._anchor;)l.previousSibling.remove();r[b].begin.remove(),l.remove(),j(r[b].scope),delete r[b]}for(let b in k){let l=k[b].end;for(;l.previousSibling._anchor!==l._anchor;)l.previousSibling.remove();k[b].begin.remove(),j(k[b].scope),l.remove()}}function ye(e,t,n,o,r,i,u){let s=!0;for(let c=0;c<u;c++)s=s&&!r.values[c];o.children&&(s=s&&!!e.$$t[o.children[0].code](e));let a=n.anchorNode,h={map:{...i.map},storage:{...i.storage}};if(r.values[u]!==s){let c=n.scope.parent;if(r.values[u]=s,s){let m=++c.counter,p={id:m,instance:e,arguments:[...c.arguments],components:[],map:{...c.map},track:[],parent:c,children:{},counter:0};c.refs&&(p.refs=c.refs),n.scope=p,c.children[m]=p,E(a,e,[t],p,h,!1,!0)}else for(j(n.scope),n.scope={id:-1,instance:e,arguments:[],components:[],map:{},track:[],parent:c,children:{},counter:0};a.previousSibling._anchor!==a._anchor;)a.previousSibling.remove()}}function Ue(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"";n.nodeValue!==o&&(n.nodeValue=o)}var ct=0;function B(e,t,n,o){e.$$r[t]||(e.$$r[t]={});let r=++ct;n.track.push({id:r,path:t}),e.$$r[t][r]=o}function U(e){let t="value";switch(e.t){case"t":{t="tag";break}case"a":{t="attr";break}case void 0:case"v":{t="value";break}case"c":{t="component";break}case"x":{t="text";break}case"m":{t="comment";break}case"d":{t="doctype";break}case"r":{t="root",e.h&&e.h[0].t==="x"&&e.h[0].c?.substring(0,9)==="<!DOCTYPE"&&(e.h[0].t="d");break}default:throw new Error("Type "+e.t+" is not defined in build")}if(e.type=t,delete e.t,e.c&&(e.content=e.c,delete e.c),e.e&&(e.expression=e.e,delete e.e),e.a){e.attributes=e.a,delete e.a;for(let n in e.attributes)U(e.attributes[n])}if(e.i){e.directives=e.i,delete e.i;for(let n in e.directives)U(e.directives[n])}if(e.h){e.children=e.h,delete e.h;for(let n in e.children)U(e.children[n])}}function ve(e){return e in M.list}function Je(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"",r=t.type==="component"||t.expression&&ve(o),i=n.anchorNode,u=n.scope.parent;for(j(n.scope);i.previousSibling._anchor!==i._anchor;)i.previousSibling.remove();let s=++u.counter,a={id:s,arguments:[...u.arguments],components:[],map:{...u.map},track:[],instance:e,parent:u,children:{},counter:0};if(u.refs&&(a.refs=u.refs),n.scope=a,u.children[s]=a,r){let h={};if(t.slots){let m={id:++a.counter,arguments:[...u.arguments],components:[],map:{...u.map},track:[],instance:e,parent:a,children:{},counter:0,slots:u.slots};for(let p in t.slots)h[p]={node:t.slots[p],scope:m}}z(i,o,{attributes:t.attributes,scope:u,instance:e},h,!1,!0);return}else{let h=i.parentElement.insertBefore(document.createElement(o),i);if(t.attributes)for(let c in t.attributes){let m=t.attributes[c],p=m.expression?e.$$t[m.code](e):m.content??"";if(p[0]==="("){let k=p.substring(1,p.length-1);if(m.children){let b=e.$$t[m.dynamic?m.dynamic.code:m.children[0].code](e);h.addEventListener(k,b)}}else{Y(e,m,h,p,a);let k=[];if(m.children)for(let b in m.children){let l=m.children[b];l.subs&&(k=k.concat(l.subs))}if(k)for(let b in k){let l=k[b];B(e,l,a,[Y,[e,m,h,p,a]])}}}t.children&&E(h,e,t.children,a,void 0,!1,!1)}}function We(e,t,n,o){for(;o.previousSibling._anchor!==o._anchor;)o.previousSibling.remove();let r=o.parentElement,i=document.createElement(r.nodeName),u=[e];n.arguments&&(u=u.concat(n.arguments));let s=(t.expression?e.$$t[t.code].apply(null,u):t.content)??"";i.innerHTML=s;let a=Array.prototype.slice.call(i.childNodes);for(let h=0;h<a.length;h++){let c=a[h];r.insertBefore(c,o)}}function Ge(e,t){return function(n){if(t.inputType==="checkbox"){let o=t.getter(e),r=n.target.value;if(Array.isArray(o)){let i=o.slice(),u=i.indexOf(r);u===-1?n.target.checked&&i.push(r):n.target.checked||i.splice(u,1),t.setter(e,i)}else t.setter(e,n.target.checked)}else if(t.inputType==="radio"){let o=n.target.value;t.setter(e,o)}else if(t.isMultiple){let o=n.target.options,r=[];for(let i=0;i<o.length;i++){let u=o[i];u.selected&&r.push(u.value)}t.setter(e,r)}else t.setter(e,n.target.value)}}function ke(e,t,n){if(n.inputType==="checkbox"){let o=n.getter(t);if(Array.isArray(o)){let r=e.value;o.indexOf(r)===-1?(e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("checked","checked"),e.checked=!0)}else o?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.inputType==="radio"){let o=n.getter(t),r=e.value;o===r?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.isMultiple){let o=e.options,r=n.getter(t);for(let i=0;i<o.length;i++){let u=o[i];r.indexOf(u.value)===-1?u.selected=!1:u.selected=!0}}else e.value=n.getter(t)}function E(e,t,n,o,r,i=!0,u=!1){let s=null,a=!1;for(let h=0;h<n.length;h++){let c=n[h],m=e,p=!1,k=!1,b=o;switch(c.type){case"tag":case"component":{if(c.directives){let f=r||{map:{},storage:{}},y=[t];o.arguments&&(y=y.concat(o.arguments));for(let T=0;T<c.directives.length;T++){let g=c.directives[T];if(!(T in f.map)){switch(f.map[T]=!0,g.content){case"if":{s={values:[],index:0,subs:[]};let A=!!t.$$t[g.children[0].code].apply(null,y);s.values.push(A);let I=i?P(e):void 0,D=S(e,u,I),O={map:{...f.map},storage:{...f.storage}},L=++o.counter,w={id:L,arguments:o.arguments,components:[],map:o.map,instance:t,track:[],parent:o,children:{},counter:0};o.refs&&(w.refs=o.refs),o.children[L]=w,A&&E(e,t,[c],w,f,i,u);let V=S(e,u,I,D._anchor);if(g.children[0].subs)for(let $ in g.children[0].subs){let R=g.children[0].subs[$];s.subs.push(R),B(t,R,o,[ye,[t,c,{scope:w,anchorNode:V},g,s,O,s.index]])}s.index++,p=!0;break}case"else-if":{if(s){let A=!0;for(let $=0;$<s.index;$++)A=A&&!s.values[$];A=A&&!s.values[s.index-1]&&!!t.$$t[g.children[0].code].apply(null,y),s.values.push(A);let I=i?P(e):void 0,D=S(e,u,I),O={map:{...f.map},storage:{...f.storage}},L=++o.counter,w={id:L,instance:t,arguments:o.arguments,components:[],map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(w.refs=o.refs),o.children[L]=w,A&&E(e,t,[c],w,f,i,u);let V=S(e,u,I,D._anchor);g.children[0].subs&&(s.subs=s.subs.concat(g.children[0].subs));for(let $ in s.subs){let R=s.subs[$];B(t,R,o,[ye,[t,c,{scope:w,anchorNode:V},g,s,O,s.index]])}s.index++,p=!0}else console.warn("Directive else-if has missing previous if/else-if",g.content,g);break}case"else":{if(s){let A=!0;for(let $=0;$<s.index;$++)A=A&&!s.values[$];s.values.push(A);let I=i?P(e):void 0,D=S(e,u,I),O={map:{...f.map},storage:{...f.storage}},L=++o.counter,w={id:L,instance:t,arguments:o.arguments,components:[],map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(w.refs=o.refs),o.children[L]=w,A&&E(e,t,[c],w,f,i,u);let V=S(e,u,I,D._anchor);for(let $ in s.subs){let R=s.subs[$];B(t,R,o,[ye,[t,c,{scope:w,anchorNode:V},g,s,O,s.index]])}s.index++,p=!0}else console.warn("Directive else has missing previous if/else-if",g.content,g);break}case"foreach":{let A=t.$$t[g.children[0].forData].apply(null,y),I=i?P(e):void 0,D=S(e,u,I),O=Array.isArray(A),L={};for(let V in A){let $=O?+V:V,R=A[$],Ne=++o.counter,H={id:Ne,instance:t,arguments:[...o.arguments],components:[],map:{...o.map},track:[],parent:o,children:{},counter:0};o.refs&&(H.refs=o.refs),o.children[Ne]=H,H.map[g.children[0].forKey]=H.arguments.length,H.arguments.push($),H.map[g.children[0].forItem]=H.arguments.length,H.arguments.push(R);let qe={map:{...f.map},storage:{...f.storage}},Te=S(e,u,I,"b"+ge());E(e,t,[c],H,qe,i,u);let et=S(e,u,I,Te._anchor);L[$]={key:$,value:R,begin:Te,end:et,scope:H}}let w=S(e,u,I,D._anchor);if(g.children[0].subs)for(let V in g.children[0].subs){let $=g.children[0].subs[V],R={map:{...f.map},storage:{...f.storage}};B(t,$,o,[Fe,[t,c,g,w,L,R,o]])}p=!0;break}default:{console.warn("Directive not implemented",g.content,g),p=!0;break}}if(p)break}}if(p)continue}let l=c.expression?t.$$t[c.code](t):c.content??"",_=c.subs,x=c.type==="component"||c.expression&&ve(l),d,C,N;if(_&&(d=i?P(e):void 0,C=S(e,u,d)),_||x){let f=++o.counter;N={id:f,arguments:[...o.arguments],components:[],map:{...o.map},track:[],instance:t,parent:o,children:{},counter:0},o.refs&&(N.refs=o.refs),o.children[f]=N,b=N}if(x){let f={};if(c.slots){let y=++N.counter,T={id:y,arguments:[...o.arguments],components:[],map:{...o.map},track:[],parent:N,instance:t,children:{},counter:0,slots:o.slots};o.refs&&(T.refs=o.refs),N.children[y]=T;for(let g in c.slots)f[g]={node:c.slots[g],scope:T}}z(e,l,{attributes:c.attributes,scope:o},f,i,u)}else{if(c.content==="template"){a=u;break}if(c.content==="slot"){a=u;let f="default";if(c.attributes)for(let y in c.attributes)c.attributes[y].content==="name"&&(f=c.attributes[y].children[0].content);if(f in o.slots){let y=o.slots[f];y.node.unpacked||(U(y.node),y.node.unpacked=!0),E(m,y.scope.instance,y.node.children,y.scope,void 0,i,a)}else c.children&&E(m,t,c.children,o,void 0,i,a);continue}k=!0,m=i?Oe(e,l):u?e.parentElement.insertBefore(document.createElement(l),e):e.appendChild(document.createElement(l)),c.first&&(t._element=m)}if(_){let f=S(e,u,d,C._anchor);if(c.subs)for(let y in c.subs){let T=c.subs[y];B(t,T,o,[Je,[t,c,{scope:N,anchorNode:f}]])}}if(x)continue;break}case"text":{if(c.raw){let _=u?e.parentElement:e,x=document.createElement(_.nodeName),d=[t];o.arguments&&(d=d.concat(o.arguments));let C=(c.expression?t.$$t[c.code].apply(null,d):c.content)??"";x.innerHTML=C;let N=i?P(e):void 0,f=S(e,u,N);if(i){if(x.childNodes.length>0){let T=Array.prototype.slice.call(x.childNodes);for(let g=0;g<T.length;g++){let A=T[g],I=A.nodeType;if(I!==3){N.current++;let D=e.childNodes[N.current];(D.nodeType!==I||I===1&&D.nodeName!==A.nodeName)&&console.log("Missmatch")}}}}else if(x.childNodes.length>0){let T=Array.prototype.slice.call(x.childNodes);for(let g=0;g<T.length;g++){let A=T[g];u?e.parentElement.insertBefore(A,e):e.appendChild(A)}}let y=S(e,u,N,f._anchor);if(c.subs)for(let T in c.subs){let g=c.subs[T];B(t,g,o,[We,[t,c,o,y]])}break}let l;if(i?l=je(e,t,c,o):(l=document.createTextNode(""),G(t,c,l,o),u?e.parentElement.insertBefore(l,e):e.appendChild(l)),c.subs)for(let _ in c.subs){let x=c.subs[_];B(t,x,o,[G,[t,c,l,o]])}break}case"comment":{let l=c.expression?t.$$t[c.code](t):c.content??"",_=i?He(e,l):u?e.parentElement.insertBefore(document.createComment(l),e):e.appendChild(document.createComment(l));if(c.subs)for(let x in c.subs){let d=c.subs[x];B(t,d,o,[Ue,[t,c,_]])}break}case"doctype":{if(i){let l=P(e);l.current++}break}default:{console.warn("Node type not implemented",c);break}}if(k){if(c.attributes){let l=i?m.getAttributeNames():null,_=i?{}:null;for(let x=0;x<c.attributes.length;x++){let d=c.attributes[x],C=d.expression?t.$$t[d.code](t):d.content??"";if(C[0]==="#"){let f=C.substring(1,C.length);t._refs[f]=m,o.refs&&f in o.refs&&(t[f]=m);continue}let N=C==="model";if(C[0]==="("){let f=C.substring(1,C.length-1);if(d.children){let y=t.$$t[d.dynamic?d.dynamic.code:d.children[0].code](t);m.addEventListener(f,y)}}else if(N){let f="text";m.getAttribute("type")==="checkbox"&&(f="checkbox"),m.getAttribute("type")==="radio"&&(f="radio");let y=!1;m.tagName==="SELECT"&&(f="select",y=m.multiple);let T=f==="checkbox"||f==="radio"||f==="select",g=d.children[0],A=t.$$t[g.code](t),I=T?"change":"input",D={getter:A[0],setter:A[1],inputType:f,isMultiple:y};ke(m,t,D);for(let O in g.subs){let L=g.subs[O];B(t,L,o,[ke,[m,t,D]])}m.addEventListener(I,Ge(t,D))}else{i&&(_[C]=!0),Y(t,d,m,C,o);let f=[];if(d.children)for(let y in d.children){let T=d.children[y];T.subs&&(f=f.concat(T.subs))}if(f)for(let y in f){let T=f[y];B(t,T,o,[Y,[t,d,m,C,o]])}}}if(i)for(let x=0;x<l.length;x++)l[x]in _||m.removeAttribute(l[x])}else if(i){let l=m.getAttributeNames();for(let _=0;_<l.length;_++)m.removeAttribute(l[_])}}c.children&&E(m,t,c.children,b,void 0,i,a)}}var ut={},st={},at=0;function _e(e,t=[]){let n=M.list[e],o=null,r=!1;if(n.di==="Singleton"?r=st:n.di==="Scoped"&&(r=ut),r&&e in r)return r[e];if(!n.dependencies)o=new F[e];else{let u=[];for(let s in n.dependencies){let a=n.dependencies[s];var i=null;t&&a.argName in t?i=t[a.argName]:a.default?i=a.default:a.null?i=null:a.builtIn?i=a.name==="string"?"":0:i=_e(a.name),u.push(i)}o=new F[e](...u)}return n.base&&(o.__id=++at+""),r&&(r[e]=o),o}function Ye(e,t,n,o){e[t]=n(o)}function ze(e,t,n){let o=n.scope.instance,r=t.expression?o.$$t[t.code](o):t.content??"";if(r[0]!=="("){let i=null,u=[];if(t.children)for(let s=0;s<t.children.length;s++){let a=t.children[s],h=[o];n.scope.arguments&&(h=h.concat(n.scope.arguments));let c=a.expression?o.$$t[a.code].apply(null,h):a.content??"";i=s===0?c:i+(c??""),a.subs&&(u=u.concat(a.subs))}if(r==="_props"&&i)for(let s in i)e[s]=i[s],e._props[s]=i[s];else e[r]=i,e._props[r]=i}}function z(e,t,n,o,r=!1,i=!1){if(!(t in M.list))throw new Error(`Component ${t} not found.`);if(!(t in F))throw new Error(`Component ${t} not found.`);let u=M.list[t],s=u.nodes,a=Ve(_e(t)),h=t+"_x";h in F&&(a.$$t=F[h]);let c=n?++n.scope.counter:0,m={id:c,arguments:n?[...n.scope.arguments]:[],components:[],instance:a,main:!0,map:n?{...n.scope.map}:{},track:[],children:{},counter:0,parent:n?n.scope:void 0,slots:o};if(n&&(n.scope.children[c]=m),u.refs&&(m.refs=u.refs),n&&n.attributes){let p=n.scope.instance;for(let k in n.attributes){let b=n.attributes[k],l=b.expression?p.$$t[b.code](p):b.content??"";if(l[0]==="("){let _=l.substring(1,l.length-1);if(b.children){let x=p.$$t[b.dynamic?b.dynamic.code:b.children[0].code](p);a.$_callbacks[_]=x}}else{let _=l==="model",x=null,d=[];if(_){let C=b.children[0],N=[p];n.scope.arguments&&(N=N.concat(n.scope.arguments));let f=p.$$t[C.code].apply(null,N);x=f[0](p),a.$_callbacks[l]=Le(p,f[1]);for(let y in C.subs){let T=C.subs[y];B(p,T,n.scope,[Ye,[a,l,f[0],p]])}}else if(b.children)for(let C=0;C<b.children.length;C++){let N=b.children[C],f=[p];n.scope.arguments&&(f=f.concat(n.scope.arguments));let y=N.expression?p.$$t[N.code].apply(null,f):N.content??"";x=C===0?y:x+(y??""),N.subs&&(d=d.concat(N.subs))}else x=!0;if(l==="_props"&&x)for(let C in x)a[C]=x[C],a._props[C]=x[C];else a[l]=x,a._props[l]=x;if(d)for(let C in d){let N=d[C];B(p,N,n.scope,[ze,[a,b,n]])}}}}if(e&&s){s.unpacked||(U(s),s.unpacked=!0);let p=s.children;p&&(p[0].first=!0,E(e,a,p,m,void 0,r,i))}}function Qe(e,t,n){console.time("renderApp"),z(n??document,e,void 0,{},!0,!1);for(let o in J){let r=J[o];for(let i=r.target.childNodes.length-1;i>=r.current+1;i--)r.target.childNodes[i].remove();for(let i=r.invalid.length-1;i>=0;i--)r.target.childNodes[r.invalid[i]].remove()}console.timeEnd("renderApp")}var Xe=document.createElement("a"),lt=function(e){return Xe.href=e,Xe.pathname};function Ze(e){let t=lt(e),n=M.router.resolve(t);if(n==null)throw"Can't resolve route for uri: "+t;Qe(n.item.action,n.params)}var mt=()=>({version:"2.0.1"});globalThis.Viewi=mt;console.log("Viewi entry");(async()=>{let e=await(await fetch("/assets/components.json")).json();M.list=e,M.router.setRoutes(e._routes);let t=e._meta.boolean.split(",");for(let n=0;n<t.length;n++)M.booleanAttributes[t[n]]=!0;Ze(location.href)})();})();
