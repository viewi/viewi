(()=>{var i=class{count=0;increment(){this.$.count++}decrement(){this.$.count--}};var l=class{items=[];addNewItem(e){this.$.items.push(e)}};var o=class{_props={};$_callbacks={};_refs={};_slots={};_element=null;$$r=[];$;_name="BaseComponent";emitEvent(e,n){this.$_callbacks&&e in this.$_callbacks&&this.$_callbacks[e](n)}};var f=class extends o{_name="MenuBar"};function c(t){var e=t+"";return e.length}var d=class extends o{_name="Counter";count=0;message="My message";increment(){this.$.count++}decrement(){this.$.count--}},B=[function(t){return t.count},function(t){return c(t.message)}];var x=class extends o{_name="HomePage";title="Viewi v2 - Build reactive front-end with PHP"},N=[function(t){return t.title},function(t){return t.title}];var h=class extends o{_name="Layout";title="Viewi"},E=[function(t){return t.title}];var _=class extends o{_name="NotFoundPage"};var C=class extends o{_name="CounterPage"};var y=class extends o{_name="TodoAppPage"};var $=class extends o{_name="StatefulCounter";counter=null;$message="Secret message";count=null;constructor(e){super(),this.count=e===void 0?0:e,this.counter=new i}$calculate(){this.$.count++}},P=[function(t){return t.__id},function(t){return t.counter.count}];function a(t,e){let n,s=0;if(t===null||typeof t>"u")return 0;if(t.constructor!==Array&&t.constructor!==Object)return 1;e==="COUNT_RECURSIVE"&&(e=1),e!==1&&(e=0);for(n in t)t.hasOwnProperty(n)&&(s++,e===1&&t[n]&&(t[n].constructor===Array||t[n].constructor===Object)&&(s+=a(t[n],1)));return s}var T=class extends o{_name="StatefulTodoApp";text="";todo=null;constructor(e){super(),this.todo=e}handleSubmit(e){e.preventDefault(),c(this.$.text)!=0&&(this.$.todo.addNewItem(this.$.text),this.$.text="")}},v=[function(t){return t.text},function(t){return a(t.todo.items)+1},function(t){return t.todo.items}];var g=class extends o{_name="TodoApp";text="";items=[];handleSubmit(e){e.preventDefault(),c(this.$.text)!=0&&(this.$.items.push(this.$.text),this.$.text="")}},L=[function(t){return t.text},function(t){return a(t.items)+1},function(t){return t.items}];var k=class extends o{_name="TodoList";items=null},S=[function(t){return item}];var u={CounterReducer:i,TodoReducer:l,MenuBar:f,Counter_x:B,Counter:d,HomePage_x:N,HomePage:x,Layout_x:E,Layout:h,NotFoundPage:_,CounterPage:C,TodoAppPage:y,StatefulCounter_x:P,StatefulCounter:$,StatefulTodoApp_x:v,StatefulTodoApp:T,TodoApp_x:L,TodoApp:g,TodoList_x:S,TodoList:k};function A(t){let e=new Proxy(t,{set(n,s,r){var p=n[s]!==r,m=Reflect.set(n,s,r);return p&&s in n.$$r&&n.$$r[s](),m}});return t.$=t,e}function M(t){let e="value";switch(t.t){case"t":{e="tag";break}case"a":{e="attr";break}case void 0:case"v":{e="value";break}case"c":{e="component";break}case"x":{e="text";break}case"m":{e="comment";break}default:throw new Error("Type "+t.t+" is not defined in build")}t.type=e,delete t.t,t.c&&(t.content=t.c,delete t.c),t.e&&(t.expression=t.e,delete t.e),t.a&&(t.attributes=t.a,delete t.a),t.h&&(t.children=t.h,delete t.h)}var b={},I=()=>({version:"2.0.1"});globalThis.Viewi=I;console.log("Viewi entry");var w=document.getElementById("counter");function H(t,e,n){for(let s in n){let r=n[s];r.unpacked||(M(r),r.unpacked=!0);let p=t,m=r.expression?e.$$r[r.code](e):r.content??"";switch(r.type){case"tag":{p=document.createElement(m),t.appendChild(p),console.log("tag",r);break}case"text":{let R=document.createTextNode(m);t.appendChild(R),console.log("text",r);break}default:break}r.children&&H(p,e,r.children)}}function O(t){if(!(t in b))throw new Error(`Component ${t} not found.`);if(!(t in u))throw new Error(`Component ${t} not found.`);let e=b[t].nodes,n=A(new u[t]),s=t+"_x";if(s in u&&(n.$$r=u[s]),w&&e){let r=e.h;console.log(w,n,r),r&&H(w,n,r)}}(async()=>(b=await(await fetch("/assets/components.json")).json(),O("Counter")))();})();
