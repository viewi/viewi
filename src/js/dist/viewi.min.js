(()=>{var ee=class{method;url;action;wheres;defaults=null;constructor(t,n,o,r=null,c){this.method=t,this.url=n,this.action=o,this.wheres={},this.defaults=r,c&&(this.wheres=c)}where(t,n){return t!==null&&typeof t=="object"?this.wheres=Object.assign(this.where,t):n&&(this.wheres[t]=n),this}};var te=class{routes;trimExpr=/^\/|\/$/g;setRoutes(t){this.routes=t}getRoutes(){return this.routes}register(t,n,o,r=null,c){let s=new ee(t.toLowerCase(),n,o,r,c);return this.routes.push(s),s}get(t,n){return this.register("get",t,n)}resolve(t){t=t.replace(this.trimExpr,"");let n=t.split("/");for(let o in this.routes){let r={},c=!0,s=this.routes[o],a=s.url.replace(this.trimExpr,"").split("/"),h=0,i=!1;for(h;h<a.length;h++){let p=a[h];if(p.indexOf("*")!==-1){let d=p.slice(0,-1);if(!d||n[h].indexOf(d)===0){i=!0;break}}let k=p.indexOf("{")!==-1;if(p!==n[h]&&!k){c=!1;break}if(k){let d=p.split(/[{}]+/),l=d[1];if(l[l.length-1]==="?")l=l.slice(0,-1);else if(h>=n.length){c=!1;break}if(l.indexOf("<")!==-1){let x=/<([^>]+)>/.exec(l);x&&(l=l.replace(/<([^>]+)>/g,""),s.wheres[l]=x[1])}if(s.wheres[l]){let x=new RegExp(s.wheres[l],"g");if(!x.test(n[h])){c=!1;break}x.lastIndex=0,x.test("/")&&(i=!0)}let g=h<n.length?n[h]:null;if(g&&d[0])if(g.indexOf(d[0])!==0){c=!1;break}else g=g.slice(d[0].length);if(r[l]=g,i){r[l]=n.slice(h).join("/");break}}}if(h<n.length&&!i&&(c=!1),c)return{item:s,params:r}}return null}};var B={list:{},booleanAttributes:{},router:new te};var G={};var I={hydrate:!0,rootScope:!1,located:{},iteration:{},lastIteration:{}};function j(e){if(!e.keep){for(let t in e.track){let n=e.track[t];delete e.instance.$$r[n.path][n.id]}if(e.track=[],e.children){for(let t in e.children)j(e.children[t]);e.children={}}if(e.main){for(let n=0;n<e.instance.$$p.length;n++){let o=e.instance.$$p[n];delete o[1].$$r[o[0]]}let t=e.instance;t.destroy&&t.destroy()}e.parent&&(delete e.parent.children[e.id],delete e.parent)}}var Y=class{id=null;name=null};var ne=class{count=0;increment(){this.count++}decrement(){this.count--}};var oe=class{items=[];addNewItem(t){this.items=[...this.items,t]}};var v=class{__id="";_props={};$_callbacks={};_refs={};_slots={};_element=null;$$t=[];$$r={};$$p=[];$;_name="BaseComponent";emitEvent(t,n){t in this.$_callbacks&&this.$_callbacks[t](n)}};var re=class extends v{_name="DemoContainer"};var ie=class extends v{_name="MenuBar"};function J(e){var t=e+"";return t.length}var ce=class extends v{_name="Counter";count=0;message="My message";increment(){this.count++,this.message+="!"}decrement(){this.count--}},Ee=[function(e){return function(t){e.decrement()}},function(e){return e.count%10+12},function(e){return`
    Count `+(e.count??"")+" "+(J(e.message)??"")+`
`},function(e){return`
Count `+(e.count??"")+" strlen:"+(J(e.message)??"")+`
`},function(e){return function(t){e.count++}},function(e){return function(t){e.increment()}},function(e){return function(t){e.increment(t)}},function(e){return function(t){e.increment(t)}},function(e){return e.message}];var se=class extends v{_name="HomePage";title="Viewi v2 - Build reactive front-end with PHP";timerId=0;seconds=0;init(){this.seconds=100,this.timerId=setInterval(()=>this.tick(),1e3)}destroy(){clearInterval(this.timerId)}tick(){this.seconds++,console.log("HomePage time "+this.seconds)}},Be=[function(e){return e.title},function(e){return e.title},function(e){return"Seconds: "+(e.seconds??"")}];var ue=class extends v{_name="Layout";title="Viewi"},Me=[function(e){return`
        `+(e.title??"")+` | Viewi
    `}];var ae=class extends v{_name="PanelLayout";title="Viewi";timerId=0;seconds=0;init(){this.seconds=500,this.timerId=setInterval(()=>this.tick(),1e3)}destroy(){clearInterval(this.timerId)}tick(){this.seconds++,console.log("PanelLayout time "+this.seconds)}},Le=[function(e){return e.seconds},function(e){return e.title},function(e){return"Panel: "+(e.seconds??"")+" "+(e.title??"")}];var le=class extends v{_name="NotFoundPage"};var fe=class extends v{_name="CounterPage"};var me=class extends v{_name="TestPage"};var de=class extends v{_name="TodoAppPage"};var pe=class extends v{_name="StatefulCounter";counter=null;count=null;constructor(t,n){super(),this.counter=t,this.count=n===void 0?0:n}},De=[function(e){return function(t){e.counter.decrement()}},function(e){return e.__id},function(e){return e.counter.count},function(e){return function(t){e.counter.increment()}}];function Z(e,t){let n,o=0;if(e===null||typeof e>"u")return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;t==="COUNT_RECURSIVE"&&(t=1),t!==1&&(t=0);for(n in e)e.hasOwnProperty(n)&&(o++,t===1&&e[n]&&(e[n].constructor===Array||e[n].constructor===Object)&&(o+=Z(e[n],1)));return o}var he=class extends v{_name="StatefulTodoApp";text="";todo=null;constructor(t){super(),this.todo=t}handleSubmit(t){t.preventDefault(),J(this.text)!=0&&(this.todo.addNewItem(this.text),this.text="")}},Pe=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Z(e.todo.items)+1)+`
    `},function(e){return e.todo.items}];var xe=class extends v{_name="ItemComponent"};var be=class extends v{_name="SomeComponent"};var ge=class extends v{_name="TestButton";id=null;title=null;class=null;disabled=!1;loading=!1;onClick(t){this.emitEvent("click",t)}},Re=[function(e){return e.id},function(e){return e.disabled},function(e){return e.title},function(e){return e.class},function(e){return function(t){e.onClick(t)}},function(e){return" "+(e.title??"")+`
    `},function(e){return e.loading}];function Ae(e){var t=typeof window<"u"?window:global;t.$locutus=t.$locutus||{};var n=t.$locutus;n.php=n.php||{};var o=t.JSON,r;try{if(typeof o=="object"&&typeof o.stringify=="function"){if(r=o.stringify(e),r===void 0)throw new SyntaxError("json_encode");return r}var c=e,s=function(a){var h=["\0-","\x7F-\x9F","\xAD","\u0600-\u0604","\u070F","\u17B4","\u17B5","\u200C-\u200F","\u2028-\u202F","\u2060-\u206F","\uFEFF","\uFFF0-\uFFFF"].join(""),i=new RegExp('[\\"'+h+"]","g"),p={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return i.lastIndex=0,i.test(a)?'"'+a.replace(i,function(y){var k=p[y];return typeof k=="string"?k:"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},u=function(a,h){var i="",p="    ",y=0,k="",d="",l=0,g=i,x=[],f=h[a];switch(f&&typeof f=="object"&&typeof f.toJSON=="function"&&(f=f.toJSON(a)),typeof f){case"string":return s(f);case"number":return isFinite(f)?String(f):"null";case"boolean":return String(f);case"object":if(!f)return"null";if(i+=p,x=[],Object.prototype.toString.apply(f)==="[object Array]"){for(l=f.length,y=0;y<l;y+=1)x[y]=u(y,f)||"null";return d=x.length===0?"[]":i?`[
`+i+x.join(`,
`+i)+`
`+g+"]":"["+x.join(",")+"]",d}for(k in f)Object.hasOwnProperty.call(f,k)&&(d=u(k,f),d&&x.push(s(k)+(i?": ":":")+d));return d=x.length===0?"{}":i?`{
`+i+x.join(`,
`+i)+`
`+g+"}":"{"+x.join(",")+"}",d;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return u("",{"":c})}catch(a){if(!(a instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return n.php.last_error_json=4,null}}var ye=class extends v{_name="TestComponent";name="MyName";name2="";_name2_Test="MyName_2";empty="";null=null;url="/home";attr="title";event="(click)";arr=["a","b","c"];arrWithKeys={a:"Apple",b:"Orange",c:"Lemon"};arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},b:{a:"Apple",b:"Orange",c:"Lemon"},c:{a:"Apple",b:"Orange",c:"Lemon"}};ifValue=!0;ifElseValue=!0;nestedIf=!0;dynamic="div";dynamic2="ItemComponent";raw="<b><i>Raw html text</i></b>";isDisabled=!0;message="Some message";checked=!1;checked2=!0;checkedNames=[];picked="One";selected="";selectedList=["A","C"];user=null;NameInput=null;testModel="some test";counterReducer=null;constructor(t){super(),this.counterReducer=t,this.user=new Y,this.user.id=1,this.user.name="Miki the cat",this.counterReducer.increment()}getNames(){return Ae(this.checkedNames)}getName(t){var n=60;return t??"DefaultName"}addTodo(){this.arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},d:{R:"Rat",T:"Dog",G:"Cat"},b:{a:"Apple",b:"Orange",c:"Lemon"}}}onEvent(t){t.preventDefault()}toggleIf(){this.ifValue=!this.ifValue,this.arr=this.ifValue?["a","b","c"]:["x","b","r"]}toggleElseIf(){this.ifElseValue=!this.ifElseValue}},He=[function(e){return"Tag test "+(e.name??"")+" "+(e.name2??"")+" "+(e._name2_Test??"")},function(e){return`
    $notAVar `+(e.getName()??"")+" "+(e.getName(e.name)??"")+`
    Nested
    `},function(e){return e.url},function(e){return e.empty},function(e){return e.null},function(e){return e.attr},function(e){return function(t){expression(t)}},function(e){return e.event},function(e){return function(t){e.onEvent(t)}},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return e.testModel},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")+`
`},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.counterReducer.increment(t)}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return e.__id},function(e){return"First Name ("+(e.__id??"")+")"},function(e){return e.__id},function(e){return function(t){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return[function(t){return t.user.name},function(t,n){t.user.name=n}]},function(e){return e.user.name},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return`
    `+(e.name??"")+`
`},function(e){return[function(t){return t.name2},function(t,n){t.name2=n}]},function(e){return`
    `+(e.name2??"")+`
`},function(e){return[function(t){return t.message},function(t,n){t.message=n}]},function(e){return e.message},function(e){return[function(t){return t.checked},function(t,n){t.checked=n}]},function(e){return e.checked},function(e){return[function(t){return t.checked2},function(t,n){t.checked2=n}]},function(e){return e.checked2},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return"Checked names: "+(e.getNames()??"")},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return"Picked: "+(e.picked??"")},function(e){return[function(t){return t.selected},function(t,n){t.selected=n}]},function(e){return"Selected: "+(e.selected??"")},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return"Selected: "+(Ae(e.selectedList)??"")},function(e){return e.isDisabled},function(e){return!e.isDisabled},function(e){return e.isDisabled?" mui-btn":""},function(e){return e.isDisabled?" mui-btn--primary":""},function(e){return e.isDisabled?"":" mui-btn--accent"},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return e.raw},function(e){return e.raw},function(e){return function(t){e.raw=e.raw[0]==="<"?"New RAW: <span><i>Another content</i></span>":"<b><i>Raw html text</i></b>"}},function(e){return e.nestedIf},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return e.nestedIf},function(e){return{id:"myid",title:"Custom "+e.name,class:"mui-btn--accent"}},function(e){return`
    Custom `+(e.name??"")+`
`},function(e){return function(t){e.name="Viewi Junior"}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return e.nestedIf},function(e){return e.arrNested},function(e,t,n){return`
    Custom `+(e.name??"")+` Slot
    `},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.dynamic=e.dynamic==="div"?"ItemComponent":"div"}},function(e){return`
`+(e.dynamic??"")+" "+(e.dynamic2??"")+`
`},function(e){return e.dynamic},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return e.dynamic2},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return"Custom "+(e.name??"")+` slot
        `},function(e){return"Custom header "+(e.name??"")+" inside div"},function(e){return"Custom "+(e.name??"")+" footer"},function(e){return function(t){e.addTodo(t)}},function(e){return e.nestedIf},function(e){return e.name},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arr},function(e,t,n){return e.ifElseValue},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return e.arr},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+". "},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.arrWithKeys},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+": "},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arrNested},function(e,t,n){return t==="b"},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return function(t){e.toggleIf(t)}},function(e){return function(t){e.toggleElseIf(t)}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.name="Viewi Junior"}},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.arr},function(e,t,n){return n}];var ve=class extends v{_name="TestInput";id=null;model=null;onInput(t){this.emitEvent("model",t.target.value)}},Ve=[function(e){return function(t){e.onInput(t)}},function(e){return[function(t){return t.model},function(t,n){t.model=n}]}];var ke=class extends v{_name="TodoApp";text="";items=[];handleSubmit(t){t.preventDefault(),J(this.text)!=0&&(this.items=[...this.items,this.text],this.text="")}},Oe=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Z(e.items)+1)+`
    `},function(e){return e.items}];var Ce=class extends v{_name="TodoList";items=null},je=[function(e){return e.items},function(e,t,n){return n}];var W={UserModel:Y,CounterReducer:ne,TodoReducer:oe,DemoContainer:re,MenuBar:ie,Counter_x:Ee,Counter:ce,HomePage_x:Be,HomePage:se,Layout_x:Me,Layout:ue,PanelLayout_x:Le,PanelLayout:ae,NotFoundPage:le,CounterPage:fe,TestPage:me,TodoAppPage:de,StatefulCounter_x:De,StatefulCounter:pe,StatefulTodoApp_x:Pe,StatefulTodoApp:he,ItemComponent:xe,SomeComponent:be,TestButton_x:Re,TestButton:ge,TestComponent_x:He,TestComponent:ye,TestInput_x:Ve,TestInput:ve,TodoApp_x:Oe,TodoApp:ke,TodoList_x:je,TodoList:Ce};function Ke(e,t){return function(n){t(e,n)}}var Fe={_props:!0,$_callbacks:!0,_refs:!0,_slots:!0,_element:!0,$$t:!0,$$r:!0,$:!0,_name:!0,emitEvent:!0};var ct=0;function st(e,t,n){let o=e.$??e;return o.$||(Object.defineProperty(o,"$",{enumerable:!1,writable:!0,value:o}),Object.defineProperty(o,"$$r",{enumerable:!1,writable:!0,value:{}})),new Proxy(o,{set(c,s,u){let a=c[s]!==u,h=Reflect.set(c,s,u);if(a)for(let i in c.$$r){let p=c.$$r[i][0],y=c.$$r[i][1],k=p+"."+s;if(k in y.$$r)for(let d in y.$$r[k]){let l=y.$$r[k][d];l[0].apply(null,l[1])}}return h}})}function Ue(e){let t=Object.keys(e);for(let o=0;o<t.length;o++){let r=t[o],c=e[r];if(!(r in Fe)&&c!==null&&typeof c=="object"&&!Array.isArray(c)){let s=st(c,e,r);e[r]=s;let u=++ct+"";s.$$r[u]=[r,e],e.$$p.push([u,s])}}let n=new Proxy(e,{set(o,r,c){let s=o[r]!==c,u=Reflect.set(o,r,c);if(s&&r in o.$$r)for(let a in o.$$r[r]){let h=o.$$r[r][a];h[0].apply(null,h[1])}return u}});return e.$=e,n}var ut=0;function D(e){return e.__aid||(e.__aid=++ut,G[e.__aid]={current:-1,target:e,invalid:[],added:0}),G[e.__aid]}function Je(e,t){let n=D(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let c=[];for(let u=n.current+1;u<r;u++){let a=e.childNodes[u];if(a.nodeType===8)return n.current=u,n.invalid=n.invalid.concat(c),a;c.push(u)}n.added++,n.invalid=n.invalid.concat(c),console.log("Hydrate comment not found",t);let s=document.createComment(t);return n.current=n.current+c.length+1,o>n.current?e.insertBefore(s,e.childNodes[n.current]):e.appendChild(s)}var at={body:!0,head:!0,html:!0};function We(e,t){let n=D(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let c=[];for(let u=n.current+1;u<r;u++){let a=e.childNodes[u];if(a.nodeType===1&&a.nodeName.toLowerCase()===t)return n.current=u,n.invalid=n.invalid.concat(c),a;c.push(u)}if(t in at){let u=document.getElementsByTagName(t);if(u.length>0)return n.invalid=[],u[0]}n.added++,n.invalid=n.invalid.concat(c),console.warn("Hydrate not found",t);let s=document.createElement(t);return n.current=n.current+c.length+1,o>n.current?e.insertBefore(s,e.childNodes[n.current]):e.appendChild(s)}function q(e,t,n,o){let r=[e];o.arguments&&(r=r.concat(o.arguments));let c=(t.expression?e.$$t[t.code].apply(null,r):t.content)??"";n.nodeValue!==c&&(n.nodeValue=c)}function Ge(e,t,n,o){let r=D(e),c=e.childNodes.length,s=r.current+3;s=s>c?c:s;let u=[],a=r.current>-1?r.current:r.current+1;for(let i=a;i<s;i++){let p=e.childNodes[i];if(p.nodeType===3){if(i===r.current)break;return r.current=i,r.invalid=r.invalid.concat(u),q(t,n,p,o),p}i!==r.current&&u.push(i)}r.added++,r.invalid=r.invalid.concat(u);let h=document.createTextNode("");return q(t,n,h,o),r.current=r.current+u.length+1,c>r.current?e.insertBefore(h,e.childNodes[r.current]):e.appendChild(h)}function z(e,t,n,o,r){let c=null;if(t.children){c="";for(let s=0;s<t.children.length;s++){let u=t.children[s],a=[e];r.arguments&&(a=a.concat(r.arguments));let h=u.expression?e.$$t[u.code].apply(null,a):u.content??"";c=s===0?h:c+(h??"")}}o.toLowerCase()in B.booleanAttributes?c===!0||c===null?o!==n.getAttribute(o)&&n.setAttribute(o,o):n.removeAttribute(o):c!==null?c!==n.getAttribute(o)&&n.setAttribute(o,c):n.removeAttribute(o)}var Ye=0;function _e(){return++Ye}function S(e,t=!1,n,o){let r=document.createTextNode("");return r._anchor=o??"#"+ ++Ye,n&&n.current++,t||n&&e.childNodes.length>n.current?(n?e:e.parentElement).insertBefore(r,n?e.childNodes[n.current]:e):e.appendChild(r),r}function qe(e,t,n,o,r,c,s){let u=[e];s.arguments&&(u=u.concat(s.arguments));let a=e.$$t[n.children[0].forData].apply(null,u),h=Array.isArray(a),i=o,p=!1,y={},k={};for(let d in a){let l=h?+d:d,g=a[l],x=++s.counter,f={id:x,why:"forItem",instance:e,arguments:[...s.arguments],components:[],map:{...s.map},track:[],parent:s,children:{},counter:0};s.refs&&(f.refs=s.refs),s.children[x]=f;let N=!1;for(let A in r)if(r[A]===g){N=!0,p=!1,i=o;break}else!p&&!(l in y)&&(i=r[A].begin,p=!0);if(y[l]=!0,!N){f.map[n.children[0].forKey]=f.arguments.length,f.arguments.push(l),f.map[n.children[0].forItem]=f.arguments.length,f.arguments.push(g);let A={map:{...c.map},storage:{...c.storage}},m=S(i,!0,void 0,"b"+_e());M(i,e,[t],f,A,!1,!0);let C=S(i,!0,void 0,m._anchor);l in r&&(k[l]=r[l]),r[l]={key:l,value:g,begin:m,end:C,scope:f}}}for(let d in r)if(!(d in y)){let l=r[d].end;for(;l.previousSibling._anchor!==l._anchor;)l.previousSibling.remove();r[d].begin.remove(),l.remove(),j(r[d].scope),delete r[d]}for(let d in k){let l=k[d].end;for(;l.previousSibling._anchor!==l._anchor;)l.previousSibling.remove();k[d].begin.remove(),j(k[d].scope),l.remove()}}function Ne(e,t,n,o,r,c,s){let u=!0;for(let i=0;i<s;i++)u=u&&!r.values[i];o.children&&(u=u&&!!e.$$t[o.children[0].code](e));let a=n.anchorNode,h={map:{...c.map},storage:{...c.storage}};if(r.values[s]!==u){let i=n.scope.parent;if(r.values[s]=u,u){let p=++i.counter,y={id:p,why:s===0?"if":o.children?"elseif":"else",instance:e,arguments:[...i.arguments],components:[],map:{...i.map},track:[],parent:i,children:{},counter:0};i.refs&&(y.refs=i.refs),n.scope=y,i.children[p]=y,M(a,e,[t],y,h,!1,!0)}else for(j(n.scope),n.scope={id:-1,why:"if",instance:e,arguments:[],components:[],map:{},track:[],parent:i,children:{},counter:0};a.previousSibling._anchor!==a._anchor;)a.previousSibling.remove()}}function ze(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"";n.nodeValue!==o&&(n.nodeValue=o)}var ft=0;function L(e,t,n,o){e.$$r[t]||(e.$$r[t]={});let r=++ft;n.track.push({id:r,path:t}),e.$$r[t][r]=o}function U(e){let t="value";switch(e.t){case"t":{t="tag";break}case"a":{t="attr";break}case void 0:case"v":{t="value";break}case"c":{t="component";break}case"x":{t="text";break}case"m":{t="comment";break}case"d":{t="doctype";break}case"r":{t="root",e.h&&e.h[0].t==="x"&&e.h[0].c?.substring(0,9)==="<!DOCTYPE"&&(e.h[0].t="d");break}default:throw new Error("Type "+e.t+" is not defined in build")}if(e.type=t,delete e.t,e.c&&(e.content=e.c,delete e.c),e.e&&(e.expression=e.e,delete e.e),e.a){e.attributes=e.a,delete e.a;for(let n in e.attributes)U(e.attributes[n])}if(e.i){e.directives=e.i,delete e.i;for(let n in e.directives)U(e.directives[n])}if(e.h){e.children=e.h,delete e.h;for(let n in e.children)U(e.children[n])}}function Te(e){return e in B.list}function Qe(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"",r=t.type==="component"||t.expression&&Te(o),c=n.anchorNode,s=n.scope.parent;for(j(n.scope);c.previousSibling._anchor!==c._anchor;)c.previousSibling.remove();let u=++s.counter,a={id:u,why:"dynamic",arguments:[...s.arguments],components:[],map:{...s.map},track:[],instance:e,parent:s,children:{},counter:0};if(s.refs&&(a.refs=s.refs),n.scope=a,s.children[u]=a,r){let h={};if(t.slots){let p={id:++a.counter,why:"slot",arguments:[...s.arguments],components:[],map:{...s.map},track:[],instance:e,parent:a,children:{},counter:0,slots:s.slots};for(let y in t.slots)h[y]={node:t.slots[y],scope:p}}Q(c,o,{attributes:t.attributes,scope:s,instance:e},h,!1,!0);return}else{let h=c.parentElement.insertBefore(document.createElement(o),c);if(t.attributes)for(let i in t.attributes){let p=t.attributes[i],y=p.expression?e.$$t[p.code](e):p.content??"";if(y[0]==="("){let k=y.substring(1,y.length-1);if(p.children){let d=e.$$t[p.dynamic?p.dynamic.code:p.children[0].code](e);h.addEventListener(k,d)}}else{z(e,p,h,y,a);let k=[];if(p.children)for(let d in p.children){let l=p.children[d];l.subs&&(k=k.concat(l.subs))}if(k)for(let d in k){let l=k[d];L(e,l,a,[z,[e,p,h,y,a]])}}}t.children&&M(h,e,t.children,a,void 0,!1,!1)}}function Xe(e,t,n,o){for(;o.previousSibling._anchor!==o._anchor;)o.previousSibling.remove();let r=o.parentElement,c=document.createElement(r.nodeName),s=[e];n.arguments&&(s=s.concat(n.arguments));let u=(t.expression?e.$$t[t.code].apply(null,s):t.content)??"";c.innerHTML=u;let a=Array.prototype.slice.call(c.childNodes);for(let h=0;h<a.length;h++){let i=a[h];r.insertBefore(i,o)}}function Ze(e,t){return function(n){if(t.inputType==="checkbox"){let o=t.getter(e),r=n.target.value;if(Array.isArray(o)){let c=o.slice(),s=c.indexOf(r);s===-1?n.target.checked&&c.push(r):n.target.checked||c.splice(s,1),t.setter(e,c)}else t.setter(e,n.target.checked)}else if(t.inputType==="radio"){let o=n.target.value;t.setter(e,o)}else if(t.isMultiple){let o=n.target.options,r=[];for(let c=0;c<o.length;c++){let s=o[c];s.selected&&r.push(s.value)}t.setter(e,r)}else t.setter(e,n.target.value)}}function Ie(e,t,n){if(n.inputType==="checkbox"){let o=n.getter(t);if(Array.isArray(o)){let r=e.value;o.indexOf(r)===-1?(e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("checked","checked"),e.checked=!0)}else o?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.inputType==="radio"){let o=n.getter(t),r=e.value;o===r?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.isMultiple){let o=e.options,r=n.getter(t);for(let c=0;c<o.length;c++){let s=o[c];r.indexOf(s.value)===-1?s.selected=!1:s.selected=!0}}else e.value=n.getter(t)}function M(e,t,n,o,r,c=!0,s=!1){let u=null,a=!1;for(let h=0;h<n.length;h++){let i=n[h],p=e,y=!1,k=!1,d=o;switch(i.type){case"tag":case"component":{if(i.directives){let m=r||{map:{},storage:{}},C=[t];o.arguments&&(C=C.concat(o.arguments));for(let _=0;_<i.directives.length;_++){let b=i.directives[_];if(!(_ in m.map)){switch(m.map[_]=!0,b.content){case"if":{u={values:[],index:0,subs:[]};let T=!!t.$$t[b.children[0].code].apply(null,C);u.values.push(T);let w=c?D(e):void 0,P=S(e,s,w),F={map:{...m.map},storage:{...m.storage}},R=++o.counter,E={id:R,why:"if",arguments:o.arguments,components:[],map:o.map,instance:t,track:[],parent:o,children:{},counter:0};o.refs&&(E.refs=o.refs),o.children[R]=E,T&&M(e,t,[i],E,m,c,s);let V=S(e,s,w,P._anchor);if(b.children[0].subs)for(let $ in b.children[0].subs){let H=b.children[0].subs[$];u.subs.push(H),L(t,H,o,[Ne,[t,i,{scope:E,anchorNode:V},b,u,F,u.index]])}u.index++,y=!0;break}case"else-if":{if(u){let T=!0;for(let $=0;$<u.index;$++)T=T&&!u.values[$];T=T&&!u.values[u.index-1]&&!!t.$$t[b.children[0].code].apply(null,C),u.values.push(T);let w=c?D(e):void 0,P=S(e,s,w),F={map:{...m.map},storage:{...m.storage}},R=++o.counter,E={id:R,why:"elseif",instance:t,arguments:o.arguments,components:[],map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(E.refs=o.refs),o.children[R]=E,T&&M(e,t,[i],E,m,c,s);let V=S(e,s,w,P._anchor);b.children[0].subs&&(u.subs=u.subs.concat(b.children[0].subs));for(let $ in u.subs){let H=u.subs[$];L(t,H,o,[Ne,[t,i,{scope:E,anchorNode:V},b,u,F,u.index]])}u.index++,y=!0}else console.warn("Directive else-if has missing previous if/else-if",b.content,b);break}case"else":{if(u){let T=!0;for(let $=0;$<u.index;$++)T=T&&!u.values[$];u.values.push(T);let w=c?D(e):void 0,P=S(e,s,w),F={map:{...m.map},storage:{...m.storage}},R=++o.counter,E={id:R,why:"else",instance:t,arguments:o.arguments,components:[],map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(E.refs=o.refs),o.children[R]=E,T&&M(e,t,[i],E,m,c,s);let V=S(e,s,w,P._anchor);for(let $ in u.subs){let H=u.subs[$];L(t,H,o,[Ne,[t,i,{scope:E,anchorNode:V},b,u,F,u.index]])}u.index++,y=!0}else console.warn("Directive else has missing previous if/else-if",b.content,b);break}case"foreach":{let T=t.$$t[b.children[0].forData].apply(null,C),w=c?D(e):void 0,P=S(e,s,w),F=Array.isArray(T),R={};for(let V in T){let $=F?+V:V,H=T[$],Se=++o.counter,O={id:Se,why:"foreach",instance:t,arguments:[...o.arguments],components:[],map:{...o.map},track:[],parent:o,children:{},counter:0};o.refs&&(O.refs=o.refs),o.children[Se]=O,O.map[b.children[0].forKey]=O.arguments.length,O.arguments.push($),O.map[b.children[0].forItem]=O.arguments.length,O.arguments.push(H);let rt={map:{...m.map},storage:{...m.storage}},we=S(e,s,w,"b"+_e());M(e,t,[i],O,rt,c,s);let it=S(e,s,w,we._anchor);R[$]={key:$,value:H,begin:we,end:it,scope:O}}let E=S(e,s,w,P._anchor);if(b.children[0].subs)for(let V in b.children[0].subs){let $=b.children[0].subs[V],H={map:{...m.map},storage:{...m.storage}};L(t,$,o,[qe,[t,i,b,E,R,H,o]])}y=!0;break}default:{console.warn("Directive not implemented",b.content,b),y=!0;break}}if(y)break}}if(y)continue}let l=i.expression?t.$$t[i.code](t):i.content??"",g=i.expression,x=i.type==="component"||i.expression&&Te(l),f,N,A=o;if(g&&(f=c?D(e):void 0,N=S(e,s,f)),g){let m=++o.counter;A={id:m,why:"dynamic",arguments:[...o.arguments],components:[],map:{...o.map},track:[],instance:t,parent:o,children:{},counter:0},o.refs&&(A.refs=o.refs),o.children[m]=A,d=A}if(x){let m={};if(i.slots){let C=++A.counter,_={id:C,why:"slot",arguments:[...o.arguments],components:[],map:{...o.map},track:[],parent:A,instance:t,children:{},counter:0,slots:o.slots};o.refs&&(_.refs=o.refs),A.children[C]=_;for(let b in i.slots)m[b]={node:i.slots[b],scope:_}}Q(e,l,{attributes:i.attributes,scope:o},m,c,s)}else{if(i.content==="template"){a=s;break}if(i.content==="slot"){f||(f=c?D(e):void 0),a=s;let m="default";if(i.attributes)for(let b in i.attributes)i.attributes[b].content==="name"&&(m=i.attributes[b].children[0].content);let C=S(e,s,f);if(m in o.slots){let b=o.slots[m];b.node.unpacked||(U(b.node),b.node.unpacked=!0),M(p,b.scope.instance,b.node.children,b.scope,void 0,c,a)}else i.children&&M(p,t,i.children,o,void 0,c,a);let _=S(e,s,f,C._anchor);o.instance._name in I.iteration&&(I.iteration[o.instance._name].slots[m]=_);continue}k=!0,p=c?We(e,l):s?e.parentElement.insertBefore(document.createElement(l),e):e.appendChild(document.createElement(l)),i.first&&(t._element=p)}if(g){let m=S(e,s,f,N._anchor);if(i.subs)for(let C in i.subs){let _=i.subs[C];L(t,_,o,[Qe,[t,i,{scope:A,anchorNode:m}]])}}if(x)continue;break}case"text":{if(i.raw){let g=s?e.parentElement:e,x=document.createElement(g.nodeName),f=[t];o.arguments&&(f=f.concat(o.arguments));let N=(i.expression?t.$$t[i.code].apply(null,f):i.content)??"";x.innerHTML=N;let A=c?D(e):void 0,m=S(e,s,A);if(c){if(x.childNodes.length>0){let _=Array.prototype.slice.call(x.childNodes);for(let b=0;b<_.length;b++){let T=_[b],w=T.nodeType;if(w!==3){A.current++;let P=e.childNodes[A.current];(P.nodeType!==w||w===1&&P.nodeName!==T.nodeName)&&console.log("Missmatch")}}}}else if(x.childNodes.length>0){let _=Array.prototype.slice.call(x.childNodes);for(let b=0;b<_.length;b++){let T=_[b];s?e.parentElement.insertBefore(T,e):e.appendChild(T)}}let C=S(e,s,A,m._anchor);if(i.subs)for(let _ in i.subs){let b=i.subs[_];L(t,b,o,[Xe,[t,i,o,C]])}break}let l;if(c?l=Ge(e,t,i,o):(l=document.createTextNode(""),q(t,i,l,o),s?e.parentElement.insertBefore(l,e):e.appendChild(l)),i.subs)for(let g in i.subs){let x=i.subs[g];L(t,x,o,[q,[t,i,l,o]])}break}case"comment":{let l=i.expression?t.$$t[i.code](t):i.content??"",g=c?Je(e,l):s?e.parentElement.insertBefore(document.createComment(l),e):e.appendChild(document.createComment(l));if(i.subs)for(let x in i.subs){let f=i.subs[x];L(t,f,o,[ze,[t,i,g]])}break}case"doctype":{if(c){let l=D(e);l.current++}break}default:{console.warn("Node type not implemented",i);break}}if(k){if(i.attributes){let l=c?p.getAttributeNames():null,g=c?{}:null;for(let x=0;x<i.attributes.length;x++){let f=i.attributes[x],N=f.expression?t.$$t[f.code](t):f.content??"";if(N[0]==="#"){let m=N.substring(1,N.length);t._refs[m]=p,o.refs&&m in o.refs&&(t[m]=p);continue}let A=N==="model";if(N[0]==="("){let m=N.substring(1,N.length-1);if(f.children){let C=t.$$t[f.dynamic?f.dynamic.code:f.children[0].code](t);p.addEventListener(m,C)}}else if(A){let m="text";p.getAttribute("type")==="checkbox"&&(m="checkbox"),p.getAttribute("type")==="radio"&&(m="radio");let C=!1;p.tagName==="SELECT"&&(m="select",C=p.multiple);let _=m==="checkbox"||m==="radio"||m==="select",b=f.children[0],T=t.$$t[b.code](t),w=_?"change":"input",P={getter:T[0],setter:T[1],inputType:m,isMultiple:C};Ie(p,t,P);for(let F in b.subs){let R=b.subs[F];L(t,R,o,[Ie,[p,t,P]])}p.addEventListener(w,Ze(t,P))}else{c&&(g[N]=!0),z(t,f,p,N,o);let m=[];if(f.children)for(let C in f.children){let _=f.children[C];_.subs&&(m=m.concat(_.subs))}if(m)for(let C in m){let _=m[C];L(t,_,o,[z,[t,f,p,N,o]])}}}if(c)for(let x=0;x<l.length;x++)l[x]in g||p.removeAttribute(l[x])}else if(c){let l=p.getAttributeNames();for(let g=0;g<l.length;g++)p.removeAttribute(l[g])}}i.children&&M(p,t,i.children,d,void 0,c,a)}}var mt={},dt={},pt=0;function $e(e,t=[]){let n=B.list[e],o=null,r=!1;if(n.di==="Singleton"?r=dt:n.di==="Scoped"&&(r=mt),r&&e in r)return r[e];if(!n.dependencies)o=new W[e];else{let s=[];for(let u in n.dependencies){let a=n.dependencies[u];var c=null;t&&a.argName in t?c=t[a.argName]:a.default?c=a.default:a.null?c=null:a.builtIn?c=a.name==="string"?"":0:c=$e(a.name),s.push(c)}o=new W[e](...s)}return n.base&&(o.__id=++pt+""),r&&(r[e]=o),o}function et(e,t,n,o){e[t]=n(o)}function tt(e,t,n){let o=n.scope.instance,r=t.expression?o.$$t[t.code](o):t.content??"";if(r[0]!=="("){let c=null,s=[];if(t.children)for(let u=0;u<t.children.length;u++){let a=t.children[u],h=[o];n.scope.arguments&&(h=h.concat(n.scope.arguments));let i=a.expression?o.$$t[a.code].apply(null,h):a.content??"";c=u===0?i:c+(i??""),a.subs&&(s=s.concat(a.subs))}if(r==="_props"&&c)for(let u in c)e[u]=c[u],e._props[u]=c[u];else e[r]=c,e._props[r]=c}}function Q(e,t,n,o,r=!1,c=!1){if(!(t in B.list))throw new Error(`Component ${t} not found.`);if(!(t in W))throw new Error(`Component ${t} not found.`);let s=B.list[t],u=s.nodes,a=I.lastIteration,h=t in a;if(h){let d=a[t].slots;for(let l in d){let g=d[l];for(;g.previousSibling._anchor!==g._anchor;)g.previousSibling.remove()}a[t].scope.keep=!0}let i=h?a[t].instance:Ue($e(t));h||s.hooks&&s.hooks.init&&i.init();let p=t+"_x";!h&&p in W&&(i.$$t=W[p]);let y=n?++n.scope.counter:0,k=h?a[t].scope:{id:y,why:t,arguments:n?[...n.scope.arguments]:[],instance:i,main:!0,map:n?{...n.scope.map}:{},track:[],children:{},counter:0,parent:n?n.scope:void 0,slots:o};if(n&&(n.scope.children[y]=k),s.refs&&(k.refs=s.refs),n&&n.attributes){let d=n.scope.instance;for(let l in n.attributes){let g=n.attributes[l],x=g.expression?d.$$t[g.code](d):g.content??"";if(x[0]==="("){let f=x.substring(1,x.length-1);if(g.children){let N=d.$$t[g.dynamic?g.dynamic.code:g.children[0].code](d);i.$_callbacks[f]=N}}else{let f=x==="model",N=null,A=[];if(f){let m=g.children[0],C=[d];n.scope.arguments&&(C=C.concat(n.scope.arguments));let _=d.$$t[m.code].apply(null,C);N=_[0](d),i.$_callbacks[x]=Ke(d,_[1]);for(let b in m.subs){let T=m.subs[b];L(d,T,n.scope,[et,[i,x,_[0],d]])}}else if(g.children)for(let m=0;m<g.children.length;m++){let C=g.children[m],_=[d];n.scope.arguments&&(_=_.concat(n.scope.arguments));let b=C.expression?d.$$t[C.code].apply(null,_):C.content??"";N=m===0?b:N+(b??""),C.subs&&(A=A.concat(C.subs))}else N=!0;if(x==="_props"&&N)for(let m in N)i[m]=N[m],i._props[m]=N[m];else i[x]=N,i._props[x]=N;if(A)for(let m in A){let C=A[m];L(d,C,n.scope,[tt,[i,g,n]])}}}}if(t in I.located&&(I.iteration[t]={instance:i,scope:k,slots:{}}),h){let d=a[t].slots;for(let g in d){let x=d[g];if(x.parentNode&&document.body.contains(x)){if(o&&g in o){let f=o[g];f.node.unpacked||(U(f.node),f.node.unpacked=!0),M(x,f.scope.instance,f.node.children,f.scope,void 0,!1,!0)}I.iteration[t].slots[g]=x}}let l=t;for(;l;){let g=B.list[l];l=!1;let x=g.nodes;if(x){let f=x.children;f&&f[0].type==="component"&&f[0].content in a&&(I.iteration[f[0].content]=a[f[0].content],l=f[0].content)}}return k}if(e&&u){u.unpacked||(U(u),u.unpacked=!0);let d=u.children;d&&(d[0].type==="component"&&(I.located[d[0].content]=!0),d[0].first=!0,M(e,i,d,k,void 0,r,c))}return k}function nt(e,t,n){console.time("renderApp");let o=I.hydrate;I.lastIteration=I.iteration,I.iteration={},I.located={};let r=I.rootScope;I.rootScope=Q(n??document,e,void 0,{},o,!1),I.hydrate=!1;for(let c in I.lastIteration)c in I.iteration||(I.lastIteration[c].scope.keep=!1);if(r&&j(r),o)for(let c in G){let s=G[c];for(let u=s.target.childNodes.length-1;u>=s.current+1;u--)s.target.childNodes[u].remove();for(let u=s.invalid.length-1;u>=0;u--)s.target.childNodes[s.invalid[u]].remove()}console.timeEnd("renderApp"),console.log(I)}var ht=document.createElement("a"),K={link:ht,scrollTo:null};var xt=function(e){return K.link.href=e,K.link.pathname};function X(e,t=!0){let n=xt(e),o=B.router.resolve(n);if(o==null)throw"Can't resolve route for uri: "+n;nt(o.item.action,o.params),t&&window.history.pushState({href:e},"",e)}function ot(){document.addEventListener("click",function(e){if(e.defaultPrevented)return;e.target||console.warn('Can not aquire event target at "watchLinks".');let n=e.target;for(;n.parentElement&&n.tagName!=="A";)n=n.parentElement;n.tagName==="A"&&n.href&&n.href.indexOf(location.origin)===0&&(K.scrollTo=null,(!K.link.hash||K.link.pathname!==location.pathname)&&(e.preventDefault(),K.link.hash&&(K.scrollTo=K.link.hash),X(n.href,!0)))},!1),window.addEventListener("popstate",function(e){e.state?X(e.state.href,!1):X(location.href,!1)})}var bt=()=>({version:"2.0.1"});globalThis.Viewi=bt;console.log("Viewi entry");(async()=>{let e=await(await fetch("/assets/components.json")).json();B.list=e,B.router.setRoutes(e._routes);let t=e._meta.boolean.split(",");for(let n=0;n<t.length;n++)B.booleanAttributes[t[n]]=!0;ot(),X(location.href)})();})();
