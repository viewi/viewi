function OnReady(e){var n=this;this.then=function(e,n){this.onOk=e,this.onError=n},this.catch=function(e){this.onError=e},e(function(e){n.onOk(e)},function(){n.onError()})}function Viewi(){var e=this,n={},t={},o={},r=/^\s*|\s*$/g,i=/;$/g,d={onViewiUrlChange:null};"img,embed,object,link,script,audio,video,style".split(",").each(function(e){o[e]=!0});var s=[],a=new Router;this.componentsUrl=VIEWI_PATH+"/components.json",this.components={};var l=document.createElement("a"),c=!1,u=function(e){return l.href=e,l.pathname},p=function(){for(var e in o)for(var n=document.getElementsByTagName(e),t=0;t<n.length;t++)s.push(n[t])},f=function(){e.components._meta.tags.split(",").each(function(e){n[e]=!0}),e.components._meta.boolean.split(",").each(function(e){t[e]=!0}),e.components._routes.each(function(e){a.register(e.method,e.url,e.component)}),p(),c=!0,e.go(location.href,!1)};this.start=function(){"undefined"!=typeof onViewiUrlChange&&"function"==typeof onViewiUrlChange&&(d.onViewiUrlChange=onViewiUrlChange),"undefined"!=typeof ViewiPages?(e.components=ViewiPages,f()):ajax.get(this.componentsUrl).then(function(n){e.components=n,f()}),document.addEventListener("click",function(n){n=n||window.event;var t=n.target||n.srcElement,o=t;"A"===o.parentNode.tagName&&(o=o.parentNode),"A"===o.tagName&&o.href&&0===o.href.indexOf(location.origin)&&(u(o.href),l.hash&&l.pathname===location.pathname||(n.preventDefault(),e.go(o.href,!0),l.hash&&l.click()))},!1),window.addEventListener("popstate",function(n){n.state?e.go(n.state.href,!1):e.go(location.href,!1)})},this.go=function(n,t){var o=u(n);d.onViewiUrlChange&&d.onViewiUrlChange(o);var r=a.resolve(o);if(null==r)throw"Can't resolve route for uri: "+o;t&&window.history.pushState({href:n},"",n),e.render(r.item.action,r.params)};var h=[],m=function(n,t){var o=arguments.length>2&&arguments[2],d=arguments.length>3&&arguments[3];if(n.expression){var s={call:!0,instance:t},a=["_component","app"];return(o||n.setter)&&a.push("event"),a=a.concat(h),n.code=n.code.replace(r,""),n.code=n.code.replace(i,""),n.setter?a.push(n.isChecked?"if(Array.isArray("+n.code+")) {  if ("+n.code+".indexOf(event.target.value) === -1) { event.target.checked && "+n.code+".push(event.target.value);event.target.checked && notify("+n.code+");  } else { !event.target.checked && "+n.code+".splice("+n.code+".indexOf(event.target.value), 1);!event.target.checked && notify("+n.code+");  }  } else { "+n.code+" = event.target.checked; } ":n.code+" = event.target.value;"):n.raw||d?a.push("return "+n.code+";"):a.push("return app.htmlentities("+n.code+");"),s.code=n.code,s.func=Function.apply(null,a),s}return{call:!1,content:n.raw?n.content:e.decode(n.content)}},v=["template"],N=["if","else-if","else","foreach"],y=["if","else-if","else"],b=[],g=function(e,n){var t=arguments.length>2&&arguments[2],o=arguments.length>3?arguments[3]:null,r=arguments.length>4&&arguments[4],i=e.children,d=[],s=!1,a=null,l={};for(var c in i){var u=i[c];if("tag"!==u.type||"slot"!==u.content)if(!u.raw&&s&&"text"===u.type&&"text"===s.type||"comment"===u.type&&"comment"===s.type){if(s.contents.push(m(u,n)),u.subs)for(var p in u.subs)D(s,u.subs[p])}else{var f=null;u.attributes&&(f=u.attributes.first(function(e){return-1!==N.indexOf(e.content)&&-1===b.indexOf(e.content)}));var x=!1;if(s={id:++k,type:u.type,contents:[m(u,n)],domNode:null,parent:o,instance:n,previousNode:a},u.raw&&(s.type="raw",s.isVirtual=!0),o&&o.condition&&(s.condition=o.condition),a&&(a.nextNode=s),a=s,"tag"===u.type&&u.expression&&(s.type="dynamic",s.componentChilds=u.children,s.isVirtual=!0),null===f&&"tag"===u.type&&-1!==v.indexOf(u.content)){var w=u.content;s.type=w,s.isVirtual=!0}if(null===f){if(b.length>0&&(b=[]),"component"===u.type&&(x=u.content),u.subs)for(var p in u.subs)D(s,u.subs[p]);if(childNodes=!1,u.children&&(childNodes=g(u,n,t,s)),u.attributes&&(s.attributes=u.attributes.where(function(e){return-1===N.indexOf(e.content)}).select(function(e){var t={},o=!e.expression&&"("===e.content[0];if(t.content=e.content,t.isAttribute=!0,t.parent=s,t.contentExpression=m(e,n),t.instance=s.instance,e.dynamic&&(t.dynamic=e.dynamic),s.scope&&(t.scope=s.scope),e.children&&(t.children=e.children.select(function(r){var i={},d="model"===e.content;if(i.contentExpression=m(r,n,o,d),"dynamic"!==s.type&&"component"!==s.type||(i.propExpression=m(r,n,null,!0),r.subs&&(i.subs=r.subs)),i.content=r.content,r.subs&&!o)for(var a in r.subs)D(t,r.subs[a]);return i})),e.subs&&!o)for(var r in e.subs)D(t,e.subs[r]);return t})),x){var E=!1;r&&(te=!0,E=!0);var V=Q(x,childNodes,s.attributes);E&&(te=!1);I=d.length>0?d[d.length-1]:null,L=[];V.each(function(e){!I||"text"!==I.type||"text"!==e.type||e.raw||I.raw?(e.nextNode=null,e.parent=o,e.previousNode=I,I&&(I.nextNode=e),I=e,L.push(e)):I.contents=I.contents.concat(e.contents)}),d=d.concat(L),a=d.length>0?d[d.length-1]:null}else childNodes&&("dynamic"===s.type||"raw"===s.type?s.itemChilds=childNodes:s.children=childNodes),d.push(s)}else{if(s.type=f.content,"if"===s.type&&(l={}),s.isVirtual=!0,b.push(f.content),-1!==y.indexOf(s.type)){for(var p in s.condition=f.children?m(f.children[0],n):{},l)D(s,p);if(f.children&&f.children[0].subs)for(var p in f.children[0].subs)D(s,f.children[0].subs[p]),l[f.children[0].subs[p]]=!0}var C=!1;if("foreach"===s.type&&f.children){for(var p in C=f.children[0],C.subs)D(s,C.subs[p]);s.forExpression={};var arguments=["_component","app"].concat(h);arguments.push("return "+C.forData+";"),s.forExpression.data=Function.apply(null,arguments),s.forExpression.key=C.forKey,s.forExpression.value=C.forItem,h.push(C.forKey),h.push(C.forItem),s.scope={stack:h.slice(),data:{}}}if(s.children=g({children:[u]},n,t,s),C){var O=h.indexOf(C.forKey);O>-1&&h.splice(O,1),O=h.indexOf(C.forItem),O>-1&&h.splice(O,1)}d.push(s)}}else{!0;var P=u.attributes&&u.attributes.first(function(e){return"name"===e.content}),A=0,j=function(e){return!e.attributes};P&&(A=P.children[0].content,j=function(e){return e.attributes&&e.attributes.first(function(e){return"name"===e.content&&e.children[0].content===A})});var _=!0;if(t){if(0===A){var T=t.where(function(e){return"tag"!==e.type||"slotContent"!==e.contents[0].content});if(T.length>0){_=!1;var I=d.length>0?d[d.length-1]:null,L=[];T.each(function(e){!I||"text"!==I.type||"text"!==e.type||e.raw||I.raw?(e.nextNode=null,e.parent=o,e.previousNode=I,I&&(I.nextNode=e),I=e,L.push(e)):I.contents=I.contents.concat(e.contents)}),d=d.concat(L)}}else{var R=t.first(function(e){return"tag"===e.type&&"slotContent"===e.contents[0].content&&j(e)});if(R){_=!1;var I=d.length>0?d[d.length-1]:null,L=[];R.children.each(function(e){!I||"text"!==I.type||"text"!==e.type||e.raw||I.raw?(e.nextNode=null,e.parent=o,e.previousNode=I,I&&(I.nextNode=e),I=e,L.push(e)):I.contents=I.contents.concat(e.contents)}),d=d.concat(L)}}a=d.length>0?d[d.length-1]:null}if(_){var S=g(u,n,!1,o);I=d.length>0?d[d.length-1]:null,L=[];S.each(function(e){!I||"text"!==I.type||"text"!==e.type||e.raw||I.raw?(e.nextNode=null,e.parent=o,e.previousNode=I,I&&(I.nextNode=e),I=e,L.push(e)):I.contents=I.contents.concat(e.contents)}),d=d.concat(L),a=d.length>0?d[d.length-1]:null}}}return d},x=function(n,o,r){if(n)try{var i=o.content;if(o.contentExpression.call){var d=[o.instance,e];if(o.scope)for(var s in o.scope.stack)d.push(o.scope.data[o.scope.stack[s]]);if(i=o.contentExpression.func.apply(null,d),o.latestValue&&o.latestValue!==i&&(n.removeAttribute(o.latestValue),o.listeners&&o.latestValue in o.listeners)){var a=o.latestValue.substring(1,o.latestValue.length-1);n.removeEventListener(a,o.listeners[o.latestValue])}o.latestValue=i}if("("===i[0]){if(c&&!r)return;a=i.substring(1,i.length-1);var l=null;o.dynamic?(o.eventExpression||(o.eventExpression=m(o.dynamic,o.instance,!0)),l=o.eventExpression.func):l=o.children[0].contentExpression.func,o.listeners||(o.listeners={}),o.listeners[i]&&n.removeEventListener(a,o.listeners[i]),o.listeners[i]=function(n){l(o.parent.instance,e,n)},n.addEventListener(a,o.listeners[i])}else{if(r&&"model"!==i)return;var u=!1,p=!0;i in t&&(u=!0);var f=[];for(var h in o.children){var v=o.children[h].contentExpression;if(v.call){d=[o.instance,e];if(o.scope)for(var s in o.scope.stack)d.push(o.scope.data[o.scope.stack[s]]);p=v.func.apply(null,d),f.push(p)}else f.push(v.content)}if(u)return void(p?n.setAttribute(i,i):n.removeAttribute(i));var N="model"===i,y=f.join("");if(!N&&n.setAttribute(i,y),N){if(c&&!r)return;var b="checkbox"===n.getAttribute("type"),g="radio"===n.getAttribute("type"),x=b||g;if(x||(n.value=y),g){var w=n.getAttribute("checked");n.value!=y&&w?(n.removeAttribute("checked"),n.checked=!1):n.value!=y||w||(n.setAttribute("checked","checked"),n.checked=!0)}a=x?"change":"input";if(o.listeners||(o.listeners={}),!o.valueExpression&&o.children.length>0){o.valueExpression=m({code:o.children[0].contentExpression.code,expression:!0,setter:!0,isChecked:b},o.instance);l=o.valueExpression.func;o.listeners[a]=function(n){l(o.parent.instance,e,n)}}n.removeEventListener(a,o.listeners[a]),n.addEventListener(a,o.listeners[a])}}}catch(e){console.error(e),console.log(o.content)}},w=function(e){for(var n=e,t=!0,o=!1;!n.domNode||t;)if(t=!1,null!==n.previousNode){if(n=n.previousNode,o=!1,n.isVirtual){for(var r=n;null!==r&&!r.domNode;)r=r.isVirtual&&r.children?r.children[r.children.length-1]:null;r&&(n=r)}}else{if(null===n.parent)return null;n=n.parent,o=!0}return{itsParent:o,node:n}},k=0,E=function(t,r,i,d){if(!d&&(r.isVirtual||"text"===r.type)){for(var a=r;a.parent&&a.parent.isVirtual;)a=a.parent;for(var l=w(r),u=(l&&l.itsParent?l.node.domNode:l&&l.node.domNode.parentNode)||t,p=a;p.previousNode&&(p.previousNode.isVirtual||"text"===p.previousNode.type);)p=p.previousNode;for(var f=a;f.nextNode&&(f.nextNode.isVirtual||"text"===f.nextNode.type);)f=f.nextNode;if(p!==a||f!==a){for(var h=p,m=!0;m;)E(u,h,!0,!0),m=h!==f,h=h.nextNode;return}}if(i){var v=r.parent&&r.parent.condition,N=v&&v.value;if(v&&!N)return void T([r])}if(r.isVirtual||!r.condition||r.condition.value){var y=[];for(var b in r.contents){var g=r.contents[b];if(g.call){var k=[g.instance,e];if(r.scope)for(var V in r.scope.stack)k.push(r.scope.data[r.scope.stack[V]]);y.push(g.func.apply(null,k))}else y.push(g.content)}var L=y.join(""),R=!1,S=!1;if(r.skipIteration){r.skipIteration=!1;for(var H=r;H.isVirtual;)H=H.parent;R=H.domNode;var B=C.first(function(e,n){return e===R},!0);if(B&&B[0].parentNode&&(O[B[1]]=!0),r.refreshAttributes&&r.attributes)for(var U in r.refreshAttributes=!1,r.attributes)x(R,r.attributes[U])}else switch(r.type){case"text":if(t.doctype){R=t.doctype;break}var D=!1,M=w(r);if(i&&null==M)return;if(!D)if(M&&"text"==M.node.type)M.node.domNode.nodeValue+=L,null!==r.domNode&&(r.domNode.parentNode.removeChild(r.domNode),r.domNode=null);else if(null!==r.domNode&&r.domNode.parentNode===t)r.domNode.nodeValue=L,R=r.domNode;else{R=document.createTextNode(L);var q=M.node.domNode.nextSibling;M.itsParent||null===q?M.itsParent?M.node.domNode.childNodes.length>0?M.node.domNode.insertBefore(R,M.node.domNode.childNodes[0]):M.node.domNode.appendChild(R):M.node.domNode.parentNode.appendChild(R):q.parentNode.insertBefore(R,q),r.domNode=R}break;case"tag":if(t.documentElement){R=t.documentElement,r.domNode=R,O[0]=!0,O[1]=!0;break}if(!c&&L in o){var $=R=document.createElement(L);if(r.domNode=R,j($,r.children,S,d),r.attributes)for(var U in r.attributes)x($,r.attributes[U]);var J=C.first(function(e,n){return!(n in O)&&e.isEqualNode($)},!0);if(J){O[J[1]]=!0,r.domNode=J[0];M=w(r),q=M.node.domNode.nextSibling;M.itsParent||null===q?M.itsParent?M.node.domNode.appendChild(J[0]):M.node.domNode.parentNode.appendChild(J[0]):q.parentNode.insertBefore(J[0],q);break}if(!J&&(J=s.first(function(e){return e.isEqualNode($)}),J)){r.domNode=J;M=w(r),q=M.node.domNode.nextSibling;M.itsParent||null===q?M.itsParent?M.node.domNode.appendChild(J):M.node.domNode.parentNode.appendChild(J):q.parentNode.insertBefore(J,q);break}}if(!c&&"head"===L){var K=C.first(function(e){return e.nodeName.toLowerCase()===L},!0);R=K[0],O[K[1]]=!0,r.domNode=R;break}var F=P?C.first(function(e,n){return e.nodeName.toLowerCase()===L&&!(n in O)},!0):null;if(F&&F[0].parentNode){if(O[F[1]]=!0,A==F[1]){R=F[0],r.domNode=R;break}F[1]in O||F[0].parentNode.removeChild(F[0])}if(R=document.createElement(L),null!==r.domNode&&r.domNode.parentNode)r.domNode.parentNode.replaceChild(R,r.domNode),r.children&&T(r.children);else{M=w(r);if(null==M)return;q=M.node.domNode.nextSibling;M.itsParent||null===q?M.itsParent?M.node.domNode.childNodes.length>0?M.node.domNode.insertBefore(R,M.node.domNode.childNodes[0]):M.node.domNode.appendChild(R):M.node.domNode.parentNode.appendChild(R):q.parentNode.insertBefore(R,q)}if(r.domNode=R,L in o&&s.push(R),r.attributes)for(var U in r.attributes)x(R,r.attributes[U]);break;case"comment":if(R=document.createComment(L),null!==r.domNode)r.domNode.parentNode.replaceChild(R,r.domNode);else{M=w(r);if(null==M)return;q=M.node.domNode.nextSibling;M.itsParent||null===q?M.itsParent?M.node.domNode.childNodes.length>0?M.node.domNode.insertBefore(R,M.node.domNode.childNodes[0]):M.node.domNode.appendChild(R):M.node.domNode.parentNode.appendChild(R):q.parentNode.insertBefore(R,q)}r.domNode=R;break;case"if":r.condition.value=r.condition.func(r.instance,e),R=t,r.parentDomNode=t,r.condition.previousValue=r.condition.value,r.topRealPreviousNode=r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"else-if":r.condition.value=!r.previousNode.condition.value&&r.condition.func(r.instance,e),r.condition.previousValue=r.previousNode.condition.value||r.condition.value,R=t,r.parentDomNode=t,r.topRealPreviousNode=r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"else":r.condition.value=!r.previousNode.condition.previousValue,R=t,r.parentDomNode=t,r.topRealPreviousNode=r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"template":R=t,S=!0;break;case"foreach":if(R=t,S=!0,R){r.itemChilds||(r.itemChilds=r.children),T(r.children),r.children=null;k=[r.instance,e];var X=r.forExpression.data.apply(null,k);X&&X.length>0&&(r.children=[]);var G=null,W=Array.isArray(X);for(var V in X){var z={type:"template",isVirtual:!0,parent:r,previousNode:G,instance:r.instance,domNode:null,scope:{stack:r.scope.stack,data:Object.assign({},r.scope.data)}};G&&(G.nextNode=z),G=z,z.scope.data[r.forExpression.key]=W?+V:V,z.scope.data[r.forExpression.value]=X[V],I(z,r.itemChilds),r.children.push(z)}}break;case"dynamic":R=t,S=!0,T(r.children),r.children=null;z={contents:r.contents,attributes:r.attributes,parent:r,previousNode:null,scope:r.scope,instance:r.instance,domNode:null};r.itemChilds&&I(z,r.itemChilds),L in n?z.type="tag":(z.type="template",z.isVirtual=!0,z.children=Q(L,z.children,r.attributes),z.children.each(function(e){e.parent=z})),r.children=[z];break;case"raw":if(R=t,S=!0,r.latestHtml===L)return;r.latestHtml=L,r.rawNodes&&T(r.rawNodes),r.children=null,r.rawNodes=null;var Y=_(r);if(Y){var Z=document.createElement(Y.domNode.nodeName);if(Z.innerHTML=L,Z.childNodes.length>0){var ee=0,ne=w(r);ne.itsParent||"text"!==ne.node.type||3!==Z.childNodes[0].nodeType||(ne.node.domNode.nodeValue+=Z.childNodes[0].nodeValue,ee=1);for(var te=[];ee<Z.childNodes.length;ee++)te.push({domNode:Z.childNodes[ee]});q=ne.node.domNode.nextSibling;if(te.length>0){for(b=0;b<te.length;b++)!ne.itsParent&&q?q.parentNode.insertBefore(te[b].domNode,q):ne.itsParent?ne.node.domNode.appendChild(te[b].domNode):ne.node.domNode.parentNode.appendChild(te[b].domNode);var oe=te[te.length-1];r.children=[{type:3===oe.domNode.nodeType?"text":"tag",parent:r,previousNode:null,scope:r.scope,instance:r.instance,domNode:oe.domNode}],r.rawNodes=te}}}return;default:throw new Error("Node type '"+r.type+"' is not implemented.")}R&&j(R,r.children,S,d)}},V=null,C=[],O={},P=!1,A=0,j=function(e,n,t,o){var r=V,i=C,d=O;for(var s in V=e,P&&e!==r&&(C=Array.prototype.slice.call(V.childNodes),O={}),n){var a=C.first(function(e,t){return e===n[s].domNode},!0);a&&a[0].parentNode&&(O[a[1]]=!0)}for(var s in n)A=s,E(e,n[s],t,o);V=r,C=i,O=d},_=function(e){return e.parent?e.parent.domNode?e.parent:_(e.parent):null},T=function(e,n){for(var t in e)if(e[t].children&&T(e[t].children,n),e[t].domNode&&(e[t].domNode.parentNode&&e[t].domNode.parentNode.removeChild(e[t].domNode),e[t].domNode=null),e[t].skipIteration&&(e[t].skipIteration=!1),e[t].origin)for(var o in e[t].origin)e[t].origin[o].skipIteration=!1,e[t].origin[o].domNode=null,e[t].origin[o]=null},I=function(e,n){var t=null,o=n.select(function(n){var o=L(e,n);return o.parent=e,o.previousNode=t,t=o,o.previousNode&&(o.previousNode.nextNode=o),o});e.children=o},L=function(e,n){var t=Object.assign({},n);return t.scope=e.scope,t.nextNode=null,t.previousNode=null,t.domNode=null,t.scope=e.scope,n.children&&I(t,n.children),t},R=0,S=function(e){return"__id"in e||Object.defineProperty(e,"__id",{enumerable:!1,writable:!1,value:++R}),e.__id},H={},B={},U={},D=function(e,n){var t=e.isAttribute,o=t?e.parent.instance:e.instance,r=S(o);if(r in B||(B[r]={}),n in B[r]||(B[r][n]=[]),B[r][n].push(e),n in U){var i=U[n],d=i.instance,s=i.subs,a=S(d);for(var l in a in B||(B[a]={}),s){var c=s[l];c in B[a]||(B[a][c]=[]),B[a][c].push(e)}}},M=function(){for(var e in H)for(var n in H[e]){var t=H[e][n];t.isAttribute?x(t.parent.domNode,t):t.isVirtual?E(t.parentDomNode,t):E(t.domNode&&t.domNode.parentNode,t)}H={}},q=function(e){for(var n in e.subs){var t=e.subs[n],o=t.id;o in B&&t.path in B[o]&&(H[o+"_"+t.path]=B[o][t.path],setTimeout(function(){M()},0))}};this.notify=function(e,n){if(Array.isArray(e)){var t=Object.getPrototypeOf(e);t.deps&&q(t.deps)}};var $=function(e,n){var t=Object.getPrototypeOf(e),o={};return Object.defineProperty(o,"deps",{enumerable:!1,writable:!1,value:n}),Object.setPrototypeOf(o,t),Object.setPrototypeOf(e,o),e},J=function(e){var n=arguments.length>1?arguments[1]:e,t=arguments.length>2?arguments[2]:"this",o=arguments.length>3?arguments[3]:{subs:{}};if(Array.isArray(e)){$(e,o);for(var r=0;r<e.length;r++)null!==e[r]&&"object"==typeof e[r]&&J(e[r],n,t+"[key]")}else{var i=Object.keys(e);for(r=0;r<i.length;r++)F(n,t+"."+i[r],e,i[r])}return e},K=null,F=function(e,n,t,o){K=null;var r=null,i=t[o],d=!1;if(K?r=K:(r={subs:{}},d=!0),null!==i&&"object"==typeof i&&J(i,e,n,r),"function"!=typeof i){var s=S(e);r.subs[s+n]={instance:e,id:s,path:n},d&&Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:function(){return K=r,i},set:function(e){e!==i&&(q(r),i=e)}})}},X={},G=function(n,t){var o=e.components[n],r=o.dependencies,i=o.service;if(i&&n in X)return X[n];if(!r){var d=new window[n];return o.init&&d.__init(),S(d),J(d),i&&(X[n]=d),d}var arguments=[null];for(var s in r){var a=r[s],l=null;l=t&&a.argName in t?t[a.argName]:a.default?a.default:a.null?null:a.builtIn?"string"===a.name?"":0:G(a.name),arguments.push(l)}d=o.init?new window[n]:new(window[n].bind.apply(window[n],arguments));return o.init&&(arguments.shift(),d.__init.apply(d,arguments)),J(d),i&&(X[n]=d),d},W=function(e,n){var t=e.length,o=n.length;if(t==o){for(c=0;c<t;c++)if(c<o){var r=!0,i=!1,d=e[c].contents&&e[c].contents.select(function(e){return e.content||e.code}).join(),s=n[c].contents&&n[c].contents.select(function(e){return e.content||e.code}).join();e[c].instance.constructor!=n[c].instance.constructor&&(r=!1),d!=s&&(r=!1);var a=e[c].attributes&&e[c].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";"),l=n[c].attributes&&n[c].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";");a!=l&&(r=!1),r||"dynamic"===e[c].type&&"dynamic"===n[c].type?(i=e[c].contents&&e[c].contents.first(function(e){return e.code}),e[c].domNode=n[c].domNode,e[c].skipIteration=!e[c].isVirtual&&!!n[c].domNode&&!i,e[c].skipIteration&&(n[c].origin||(n[c].origin={}),n[c].origin[e[c].id]=e[c],e[c].refreshAttributes=e[c].attributes&&e[c].attributes.first(function(e){return e.children&&e.children.first(function(e){return e.contentExpression.code})}),e[c].refreshAttributes&&e[c].attributes.each(function(e,t){e.latestValue=n[c].attributes[t].latestValue,e.listeners=n[c].attributes[t].listeners})),n[c].rawNodes&&(e[c].rawNodes=n[c].rawNodes,e[c].latestHtml=n[c].latestHtml),e[c].children&&n[c].children&&W(e[c].children,n[c].children)):(n[c].domNode&&n[c].domNode.parentNode?n[c].domNode.parentNode.removeChild(n[c].domNode):n[c].isVirtual&&(e[c].previousNode&&"text"===e[c].previousNode.type&&e[c].previousNode.skipIteration&&(e[c].previousNode.skipIteration=!1,T([e[c].previousNode])),T(n[c].children)),e[c].children&&T(e[c].children),n[c].rawNodes&&(e[c].rawNodes=n[c].rawNodes,e[c].latestHtml=n[c].latestHtml))}}else{T(n);for(var c=0;c<t;c++)e[c].skipIteration&&(e[c].skipIteration=!1,e[c].domNode=null,e[c].children&&T(e[c].children,!0))}},z=null,Q=function(n,t,o,r,i){if(!(n in e.components))throw new Error("Component "+n+" doesn't exist.");var d=null,s=null,a=Z.components.first(function(e){return e.name===n},!0);a&&(Z.components.splice(a[1],1),s=a[0].build,te&&(d=a[0].instance));var l=U;U={};var c=z;z=n;var u=e.components[n];if(d=d||G(n,r),d.__beforeMount&&d.__beforeMount(),o)for(var p in o){var f=o[p];if(f.content in d){var h=null,m=null;for(var v in f.children){var N=f.children[v].propExpression;if(N.call){var y=[f.instance,e];if(f.scope)for(var b in f.scope.stack)y.push(f.scope.data[f.scope.stack[b]]);m=N.func.apply(null,y),f.children[v].subs&&(U["this."+f.content]={instance:f.instance,subs:f.children[v].subs})}else m=N.content;v>0?h+=m:h=m}"true"===h?h=!0:"false"===h?h=!1:"string"!=typeof h||isNaN(h)||(h=+h),d[f.content]=h}}var x=u.hasVersions?u.versions[d.__version()]:u.nodes,w=g(x,d,t,null,i);return d.__mounted&&d.__mounted(),U=l,s&&W(w,s),z=c,Y.components.push({name:n,build:w,instance:d}),w},Y={name:null,nodes:null,components:[]},Z={name:null,nodes:null,components:[]},ee=function(e,n){if(e.children)for(var t in e.children)e.children[t].domNode?n.push(e.children[t]):e.children[t].isVirtual&&ee(e.children[t],n)},ne=function(e,n){var t=e.domNode.nodeType===n.nodeType;if(t)if(3===e.domNode.nodeType||8==e.domNode.nodeType)t=e.domNode.nodeValue==n.nodeValue,t&&(e.domNode=n);else if(1===e.domNode.nodeType&&(t=e.domNode.nodeName==n.nodeName,t)){e.domNode;e.domNode=n;var o=0,r=0,i=n.childNodes.length,d=e.children?e.children.length:0;e.children&&(e.children[d-1].domNode&&3===e.children[d-1].domNode.nodeType&&(0==n.childNodes.length||3!==n.childNodes[i-1].nodeType)&&/^\s*$/.test(e.children[d-1].domNode.nodeValue)&&n.appendChild(e.children[d-1].domNode),e.children[0].domNode&&3===e.children[0].domNode.nodeType&&3!==n.childNodes[0].nodeType&&/^\s*$/.test(e.children[0].domNode.nodeValue)&&n.insertBefore(e.children[0].domNode,n.childNodes[0]),d=e.children.length,i=n.childNodes.length);for(var s=[],a=[],l=0;l<d;l++)e.children[l].rawNodes?a=a.concat(e.children[l].rawNodes):e.children[l].isVirtual?ee(e.children[l],a):a.push(e.children[l]);var c=a.length;for(l=0;l+r<i;l++){for(;l+o<c&&!a[l+o].domNode;)o++;if(l+o<c)if(a[l+o].type){var u=ne(a[l+o],n.childNodes[l+r]);if(!u){for(var p=!1,f=l+r+1;f<i;f++)if(p=ne(a[l+o],n.childNodes[f]),p){for(var h=l+r;h<f;h++)s.push(h);r+=f-(l+r);break}if(p)continue;e.domNode!==a[l+o].domNode.parentNode?(e.domNode.childNodes.length>l+r?e.domNode.replaceChild(a[l+o].domNode,e.domNode.childNodes[l+r]):e.domNode.appendChild(a[l+o].domNode),ne(a[l+o],n.childNodes[l+r])):s.push(l)}}else a[l+o].domNode=n.childNodes[l+r];else s.push(l+r)}if(s.length>0)for(var m=s.length-1;m>=0;m--){var v=s[m];n.removeChild(n.childNodes[v])}if(i=n.childNodes.length,i>c)for(m=i-1;m>=c;m--)n.removeChild(n.childNodes[m]);if(c>i)for(m=i;m<c;m++)a[m].domNode&&!a[m].type&&n.appendChild(a[m].domNode);if(e.attributes)for(var N in e.attributes)x(e.domNode,e.attributes[N],!0)}return t},te=!1,oe=!1;this.render=function(e,n){if(!e)throw new Error("Component name is required.");if(!(e in this.components))throw new Error("Component "+e+" doesn't exist.");te=!1,B={},z=null,Z=Y,Y={},Y.name=e,Y.components=[];var t=Q(e,null,null,n,!0);Y.nodes=t,oe&&window.scrollTo(0,0),oe=!0,P=!c;var o=c?{documentElement:document.createElement("html"),doctype:{}}:document;j(o,t,!1);var r=t[1];r||"dynamic"!==t[0].type||(r=t[0].children[0].children[1]),c&&ne(r,document.documentElement),P=!1,c=!1},this.htmlentities=function(e){return e};var re=document.createElement("textarea");this.decode=function(e){return re.innerHTML=e,re.value}}var ajax={get:function(e){return new OnReady(function(n,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){var e=o.status;if(0===e||e>=200&&e<400){var r=o.getResponseHeader("Content-Type");0===r.indexOf("application/json")?n(JSON.parse(o.responseText)):n(o.responseText)}else t()}},o.open("GET",e,!0),o.send()})},post:function(e,n){return new OnReady(function(t,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e=r.status;if(0===e||e>=200&&e<400){var n=r.getResponseHeader("Content-Type");0===n.indexOf("application/json")?t(JSON.parse(r.responseText)):t(r.responseText)}else o()}},r.open("POST",e,!0),r.send(JSON.stringify(n))})}};Object.defineProperty(Array.prototype,"first",{enumerable:!1,value:function(e,n){for(var t in this){if(!e)return this[t];if(e(this[t],t))return n?[this[t],t]:this[t]}return null}}),Object.defineProperty(Array.prototype,"where",{enumerable:!1,value:function(e){var n=[];for(var t in this)e(this[t],t)&&n.push(this[t]);return n}}),Object.defineProperty(Array.prototype,"select",{enumerable:!1,value:function(e){var n=[];for(var t in this)n.push(e(this[t],t));return n}}),Object.defineProperty(Array.prototype,"each",{enumerable:!1,value:function(e){for(var n in this)e(this[n],n);return this}});var app=new Viewi,notify=app.notify;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){app.start()}):app.start();