(function(e,n){function t(e){var n=this;this.action=e,this.then=function(e,t){this.onOk=e,this.onError=t,this.action(function(e){n.onOk(e)},function(e){n.onError(e)})},this.catch=function(e){this.onError=e}}function r(e){return"Blob"in window&&e instanceof Blob}var o={request:function(e,n,o,i){return new t(function(t,s){var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){var e=u.status,n=u.getResponseHeader("Content-Type"),r=n&&0===n.indexOf("application/json"),o=u.responseText;r&&(o=JSON.parse(u.responseText)),0===e||e>=200&&e<400?t(o):s(o)}};var a=null!==o&&"object"==typeof o&&!r(o);if(u.open(e.toUpperCase(),n,!0),a&&u.setRequestHeader("Content-Type","application/json"),i&&i.headers)for(var c in i.headers)u.setRequestHeader(c,i.headers[c]);null!==o?u.send(a?JSON.stringify(o):o):u.send()})},get:function(e,n){return o.request("GET",e,null,n)},post:function(e,n,t){return o.request("POST",e,n,t)},put:function(e,n,t){return o.request("PUT",e,n,t)},delete:function(e,n,t){return o.request("DELETE",e,n,t)}};e.OnReady=t,e.ajax=o})(viewiExports,viewiBring);