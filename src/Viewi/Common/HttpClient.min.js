var OnReady=bring("OnReady"),ajax=bring("ajax"),HttpClient=function(){this.response=null,this.interceptors=[],this.options={};var t=this,n=function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t};this.request=function(n,e,i,r){if(void 0===i&&(i=null),this.setOptions(r),"undefined"!=typeof viewiScopeData){var s=n.toLowerCase()+"_"+e+"_"+JSON.stringify(i);if(s in viewiScopeData)return new OnReady(function(t,n){t(viewiScopeData[s]),delete viewiScopeData[s]})}var o=ajax.request(n,e,i,this.options);if(this.interceptors.length>0){for(var a=null,u=null,c=null,l=null,p=null,h={success:!1,content:null,canceled:!1,headers:{},status:0},f=function(t){c.after=t,o.then(function(n){h.success=!0,h.content=n,t(c.next)},function(n){h.content=n,t(c.next)})},d=this.interceptors.length-1;d>=0;d--){var v=this.interceptors[d],H=v[0][v[1]];u={response:h,handle:f,onHandle:H,httpClient:t,reject:p,after:function(){},next:function(){this.previousHandler?this.previousHandler.after(this.previousHandler.next):h.success?l(h.content):p(h.content)}},c||(c=u),u.next=u.next.bind(u),a&&(u.nextHandler=a,a.previousHandler=u,u.handle=function(t){return function(n){t.previousHandler.after=n,t.reject=t.previousHandler.reject,t.onHandle(t)}}(a)),a=u}return new OnReady(function(t,n){l=t,p=n,u.reject=n,u.onHandle(u)})}return o},this.get=function(n,e){var i=t.request("GET",n,null,e);return i},this.post=function(n,e,i){var r=t.request("POST",n,e,i);return r},this.put=function(n,e,i){var r=t.request("PUT",n,e,i);return r},this.delete=function(n,e,i){var r=t.request("DELETE",n,e,i);return r},this.with=function(t){var e=new HttpClient;for(var i in e.interceptors=this.interceptors.slice(),e.interceptors.push(t),e.options=Object.assign({},this.options),e.options)n(e.options[i])&&(e.options[i]=Object.assign({},e.options[i]));return e},this.setOptions=function(t){for(var n in t)this.options[n]="headers"===n?Object.assign(this.options[n]||{},t[n]):t[n]}};exports.HttpClient=HttpClient;